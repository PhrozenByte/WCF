function shuffle(t){for(var e,i,n=t.length;0!==n;)i=Math.floor(Math.random()*n),n-=1,e=t[n],t[n]=t[i],t[i]=e;return this}function wcfEval(expression){return eval(expression)}!function(){var t=jQuery.fn.data;jQuery.fn.data=function(e){if(e)switch(typeof e){case"object":for(var i in e)if(i.match(/ID$/)){var n=e[i];delete e[i],i=i.replace(/ID$/,"-id"),e[i]=n}arguments[0]=e;break;case"string":e.match(/ID$/)&&(arguments[0]=e.replace(/ID$/,"-id"))}var a=t.apply(this,arguments);if(void 0===e)for(var i in a)i.match(/Id$/)&&(a[i.replace(/Id$/,"ID")]=a[i],delete a[i]);return a},window.console||(window.console={});for(var e=["log","info","warn","exception","assert","dir","dirxml","trace","group","groupEnd","groupCollapsed","profile","profileEnd","count","clear","time","timeEnd","timeStamp","table","error"],i=0;i<e.length;i++)"undefined"==typeof console[e[i]]&&(console[e[i]]=function(){});"undefined"==typeof console.debug&&(console.debug=function(t){console.log(t)})}(),function(){var t=!1,e=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(i){function n(){!t&&this.init&&this.init.apply(this,arguments)}var a=this.prototype;t=!0;var s=new this;t=!1;for(var o in i)s[o]="function"==typeof i[o]&&"function"==typeof a[o]&&e.test(i[o])?function(t,e){return function(){var i=this._super;this._super=a[t];var n=e.apply(this,arguments);return this._super=i,n}}(o,i[o]):i[o];return n.prototype=s,n.prototype.constructor=n,n.extend=arguments.callee,n}}(),window.matchMedia||(window.matchMedia=function(){"use strict";var t=window.styleMedia||window.media;if(!t){var e=document.createElement("style"),i=document.getElementsByTagName("script")[0],n=null;e.type="text/css",e.id="matchmediajs-test",i.parentNode.insertBefore(e,i),n="getComputedStyle"in window&&window.getComputedStyle(e,null)||e.currentStyle,t={matchMedium:function(t){var i="@media "+t+"{ #matchmediajs-test { width: 1px; } }";return e.styleSheet?e.styleSheet.cssText=i:e.textContent=i,"1px"===n.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}()),function(){if(window.matchMedia&&window.matchMedia("all").addListener)return!1;var t=window.matchMedia,e=t("only all").matches,i=!1,n=0,a=[],s=function(){clearTimeout(n),n=setTimeout(function(){for(var e=0,i=a.length;i>e;e++){var n=a[e].mql,s=a[e].listeners||[],o=t(n.media).matches;if(o!==n.matches){n.matches=o;for(var r=0,l=s.length;l>r;r++)s[r].call(window,n)}}},30)};window.matchMedia=function(n){var o=t(n),r=[],l=0;return o.addListener=function(t){e&&(i||(i=!0,window.addEventListener("resize",s,!0)),0===l&&(l=a.push({mql:o,listeners:r})),r.push(t))},o.removeListener=function(t){for(var e=0,i=r.length;i>e;e++)r[e]===t&&r.splice(e,1)},o}}(),function(t,e,i){var n=e.matchMedia;"undefined"!=typeof module&&module.exports?module.exports=i(n):"function"==typeof define&&define.amd?define(function(){return e[t]=i(n)}):e[t]=i(n)}("enquire",this,function(t){"use strict";function e(t,e){var i,n=0,a=t.length;for(n;a>n&&(i=e(t[n],n),i!==!1);n++);}function i(t){return"[object Array]"===Object.prototype.toString.apply(t)}function n(t){return"function"==typeof t}function a(t){this.options=t,!t.deferSetup&&this.setup()}function s(e,i){this.query=e,this.isUnconditional=i,this.handlers=[],this.mql=t(e);var n=this;this.listener=function(t){n.mql=t,n.assess()},this.mql.addListener(this.listener)}function o(){if(!t)throw Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!t("only all").matches}return a.prototype={setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(t){return this.options===t||this.options.match===t}},s.prototype={addHandler:function(t){var e=new a(t);this.handlers.push(e),this.matches()&&e.on()},removeHandler:function(t){var i=this.handlers;e(i,function(e,n){return e.equals(t)?(e.destroy(),!i.splice(n,1)):void 0})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){e(this.handlers,function(t){t.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var t=this.matches()?"on":"off";e(this.handlers,function(e){e[t]()})}},o.prototype={register:function(t,a,o){var r=this.queries,l=o&&this.browserIsIncapable;return r[t]||(r[t]=new s(t,l)),n(a)&&(a={match:a}),i(a)||(a=[a]),e(a,function(e){r[t].addHandler(e)}),this},unregister:function(t,e){var i=this.queries[t];return i&&(e?i.removeHandler(e):(i.clear(),delete this.queries[t])),this}},new o}),function(t,e){"use strict";function i(){}function n(t,e){if(t){"object"==typeof t&&(t=[].slice.call(t));for(var i=0,n=t.length;n>i;i++)e.call(t,t[i],i)}}function a(t,i){var n=Object.prototype.toString.call(i).slice(8,-1);return i!==e&&null!==i&&n===t}function s(t){return a("Function",t)}function o(t){return a("Array",t)}function r(t){var e=t.split("/"),i=e[e.length-1],n=i.indexOf("?");return-1!==n?i.substring(0,n):i}function l(t){t=t||i,t._done||(t(),t._done=1)}function c(t,e,n,a){var s="object"==typeof t?t:{test:t,success:e?o(e)?e:[e]:!1,failure:n?o(n)?n:[n]:!1,callback:a||i},r=!!s.test;return r&&s.success?(s.success.push(s.callback),S.load.apply(null,s.success)):r||!s.failure?a():(s.failure.push(s.callback),S.load.apply(null,s.failure)),S}function h(t){var e,i,n={};if("object"==typeof t)for(e in t)!t[e]||(n={name:e,url:t[e]});else n={name:r(t),url:t};return i=F[n.name],i&&i.url===n.url?i:(F[n.name]=n,n)}function d(t){t=t||F;for(var e in t)if(t.hasOwnProperty(e)&&t[e].state!==E)return!1;return!0}function u(t){t.state=N,n(t.onpreload,function(t){t.call()})}function p(t){t.state===e&&(t.state=O,t.onpreload=[],v({url:t.url,type:"cache"},function(){u(t)}))}function _(){var t=arguments,e=t[t.length-1],i=[].slice.call(t,1),a=i[0];return s(e)||(e=null),o(t[0])?(t[0].push(e),S.load.apply(null,t[0]),S):(a?(n(i,function(t){s(t)||!t||p(h(t))}),g(h(t[0]),s(a)?a:function(){S.load.apply(null,i)})):g(h(t[0])),S)}function f(){var t=arguments,e=t[t.length-1],i={};return s(e)||(e=null),o(t[0])?(t[0].push(e),S.load.apply(null,t[0]),S):(n(t,function(t){t!==e&&(t=h(t),i[t.name]=t)}),n(t,function(t){t!==e&&(t=h(t),g(t,function(){d(i)&&l(e)}))}),S)}function g(t,e){return e=e||i,t.state===E?(e(),void 0):t.state===L?(S.ready(t.name,e),void 0):t.state===O?(t.onpreload.push(function(){g(t,e)}),void 0):(t.state=L,v(t,function(){t.state=E,e(),n(k[t.name],function(t){l(t)}),$&&d()&&n(k.ALL,function(t){l(t)})}),void 0)}function m(t){t=t||"";var e=t.split("?")[0].split(".");return e[e.length-1].toLowerCase()}function v(e,n){function a(e){e=e||t.event,r.onload=r.onreadystatechange=r.onerror=null,n()}function s(i){i=i||t.event,("load"===i.type||/loaded|complete/.test(r.readyState)&&(!I.documentMode||I.documentMode<9))&&(t.clearTimeout(e.errorTimeout),t.clearTimeout(e.cssTimeout),r.onload=r.onreadystatechange=r.onerror=null,n())}function o(){if(e.state!==E&&e.cssRetries<=20){for(var i=0,n=I.styleSheets.length;n>i;i++)if(I.styleSheets[i].href===r.href)return s({type:"load"}),void 0;e.cssRetries++,e.cssTimeout=t.setTimeout(o,250)}}var r,l,c;n=n||i,l=m(e.url),"css"===l?(r=I.createElement("link"),r.type="text/"+(e.type||"css"),r.rel="stylesheet",r.href=e.url,e.cssRetries=0,e.cssTimeout=t.setTimeout(o,500)):(r=I.createElement("script"),r.type="text/"+(e.type||"javascript"),r.src=e.url),r.onload=r.onreadystatechange=s,r.onerror=a,r.async=!1,r.defer=!1,e.errorTimeout=t.setTimeout(function(){a({type:"timeout"})},7e3),c=I.head||I.getElementsByTagName("head")[0],c.insertBefore(r,c.lastChild)}function b(){for(var t,e=I.getElementsByTagName("script"),i=0,n=e.length;n>i;i++)if(t=e[i].getAttribute("data-headjs-load"),!!t)return S.load(t),void 0}function w(t,e){var i,a,r;return t===I?($?l(e):D.push(e),S):(s(t)&&(e=t,t="ALL"),o(t)?(i={},n(t,function(t){i[t]=F[t],S.ready(t,function(){d(i)&&l(e)})}),S):"string"==typeof t&&s(e)?(a=F[t],a&&a.state===E||"ALL"===t&&d()&&$?(l(e),S):(r=k[t],r?r.push(e):r=k[t]=[e],S)):S)}function y(){return I.body?($||($=!0,b(),n(D,function(t){l(t)})),void 0):(t.clearTimeout(S.readyTimeout),S.readyTimeout=t.setTimeout(y,50),void 0)}function C(){I.addEventListener?(I.removeEventListener("DOMContentLoaded",C,!1),y()):"complete"===I.readyState&&(I.detachEvent("onreadystatechange",C),y())}var $,x,I=t.document,D=[],k={},F={},T="async"in I.createElement("script")||"MozAppearance"in I.documentElement.style||t.opera,W=t.head_conf&&t.head_conf.head||"head",S=t[W]=t[W]||function(){S.ready.apply(null,arguments)},O=1,N=2,L=3,E=4;if("complete"===I.readyState)y();else if(I.addEventListener)I.addEventListener("DOMContentLoaded",C,!1),t.addEventListener("load",y,!1);else{I.attachEvent("onreadystatechange",C),t.attachEvent("onload",y),x=!1;try{x=!t.frameElement&&I.documentElement}catch(M){}x&&x.doScroll&&function e(){if(!$){try{x.doScroll("left")}catch(i){return t.clearTimeout(S.readyTimeout),S.readyTimeout=t.setTimeout(e,50),void 0}y()}}()}S.load=S.js=T?f:_,S.test=c,S.ready=w,S.ready(I,function(){d()&&n(k.ALL,function(t){l(t)}),S.feature&&S.feature("domloaded",!0)})}(window),String.prototype.hashCode=function(){var t,e=0;if(this.length)for(var i=0,n=this.length;n>i;i++)t=this.charCodeAt(i),e=(e<<5)-e+t,e&=e;return e},function(){var t=navigator.userAgent.toLowerCase(),e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[],i={browser:e[1]||"",version:e[2]||"0"};browser={},i.browser&&(browser[i.browser]=!0,browser.version=i.version),browser.chrome?browser.webkit=!0:browser.webkit&&(browser.safari=!0),jQuery.browser=browser,jQuery.browser.touch=!!("ontouchstart"in window)||!!("msMaxTouchPoints"in window.navigator)&&window.navigator.msMaxTouchPoints>0,jQuery.browser.smartphone="bottom"==$("html").css("caption-side"),jQuery.browser.ckeditor=navigator.userAgent.match(/(Android|Windows Phone)/i)?!1:!0,jQuery.browser.mozilla&&t.match(/trident/)&&(jQuery.browser.mozilla=!1,jQuery.browser.msie=!0)}(),function(t){(jQuery.browser=jQuery.browser||{}).mobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera);var WCF={};$.extend(!0,{removeArrayValue:function(t,e){return $.grep(t,function(t){return e!==t})},wcfEscapeID:function(t){return t.replace(/(:|\.)/g,"\\$1")},wcfIsset:function(t){return!!$("#"+$.wcfEscapeID(t)).length},getLength:function(t){var e=0;for(var i in t)t.hasOwnProperty(i)&&e++;return e}}),$.fn.extend({getTagName:function(){return this.length?this.get(0).tagName.toLowerCase():""},getDimensions:function(t){var e=css={},i=!1;switch(this.is(":hidden")&&(css=WCF.getInlineCSS(this),i=!0,this.css({display:"block",visibility:"hidden"})),t){case"inner":e={height:this.innerHeight(),width:this.innerWidth()};break;case"outer":e={height:this.outerHeight(),width:this.outerWidth()};break;default:e={height:this.height(),width:this.width()}}return i&&WCF.revertInlineCSS(this,css,["display","visibility"]),e},getOffsets:function(t){var e=css={},i=!1;switch(this.is(":hidden")&&(css=WCF.getInlineCSS(this),i=!0,this.css({display:"block",visibility:"hidden"})),t){case"offset":e=this.offset();break;case"position":default:e=this.position()}return i&&WCF.revertInlineCSS(this,css,["display","visibility"]),e},makePositioned:function(t,e){"absolute"!=t&&"fixed"!=t&&(t="absolute");var i=this.getOffsets("position");return this.css({position:t,left:i.left,margin:0,top:i.top}),e&&this.remove().appentTo("body"),this},disable:function(){return this.attr("disabled","disabled")},enable:function(){return this.removeAttr("disabled")},wcfIdentify:function(){return this.attr("id")||this.attr("id",WCF.getRandomID()),this.attr("id")},getCaret:function(){if(this.is("input")){if("text"!=this.attr("type")&&"password"!=this.attr("type"))return-1}else if(!this.is("textarea"))return-1;var t=0,e=this.get(0);if(document.selection){this.focus();var i=document.selection.createRange();i.moveStart("character",-this.val().length),t=i.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=parseInt(e.selectionStart));return t},setCaret:function(t){if(this.is("input")){if("text"!=this.attr("type")&&"password"!=this.attr("type"))return!1}else if(!this.is("textarea"))return!1;var e=this.get(0);if(this.focus(),document.selection){var i=document.selection.createRange();i.moveStart("character",t),i.moveEnd("character",0),i.select()}else(e.selectionStart||"0"==e.selectionStart)&&(e.selectionStart=t,e.selectionEnd=t);return!0},wcfDropIn:function(t,e,i){return t||(t="up"),i&&parseInt(i)||(i=200),this.show(WCF.getEffect(this,"drop"),{direction:t},i,e)},wcfDropOut:function(t,e,i){return t||(t="down"),i&&parseInt(i)||(i=200),this.hide(WCF.getEffect(this,"drop"),{direction:t},i,e)},wcfBlindIn:function(t,e,i){return t||(t="vertical"),i&&parseInt(i)||(i=200),this.show(WCF.getEffect(this,"blind"),{direction:t},i,e)},wcfBlindOut:function(t,e,i){return t||(t="vertical"),i&&parseInt(i)||(i=200),this.hide(WCF.getEffect(this,"blind"),{direction:t},i,e)},wcfHighlight:function(t,e){return this.effect("highlight",t,600,e)},wcfFadeIn:function(t,e){return e&&parseInt(e)||(e=200),this.show(WCF.getEffect(this,"fade"),{},e,t)},wcfFadeOut:function(t,e){return e&&parseInt(e)||(e=200),this.hide(WCF.getEffect(this,"fade"),{},e,t)}}),$.extend(WCF,{activeDialogs:0,_idCounter:0,getRandomID:function(){var t="";do t="wcf"+this._idCounter++;while($.wcfIsset(t));return t},inArray:function(t,e){return-1!=$.inArray(t,e)},getEffect:function(t,e){return t.is("tr")?"highlight":e},getInlineCSS:function(t){var e={},i=t.attr("style");if(!i)return{};i=i.split(";");for(var n=0,a=i.length;a>n;n++){var s=$.trim(i[n]);""!=s&&(s=s.split(":"),e[$.trim(s[0])]=$.trim(s[1]))}return e},revertInlineCSS:function(t,e,i){for(var n=0,a=i.length;a>n;n++){var s=i[n];e[s]?t.css(s,e[s]):t.css(s,"")}}}),WCF.Browser={_isChrome:null,isChrome:function(){return null===this._isChrome&&(this._isChrome=!1,/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())&&(this._isChrome=!0)),this._isChrome}},WCF.Dropdown={_callbacks:{},_didInit:!1,_dropdowns:{},_menuContainer:null,_menus:{},init:function(){null===this._menuContainer&&(this._menuContainer=$('<div id="dropdownMenuContainer" />').appendTo(document.body));var t=this;$(".dropdownToggle:not(.jsDropdownEnabled)").each(function(e,i){t.initDropdown($(i),!1)}),this._didInit||(this._didInit=!0,WCF.CloseOverlayHandler.addCallback("WCF.Dropdown",$.proxy(this._closeAll,this)),WCF.DOMNodeInsertedHandler.addCallback("WCF.Dropdown",$.proxy(this.init,this)),$(document).on("scroll",$.proxy(this._scroll,this)))},_dialogScroll:function(t){var e=$(t.currentTarget);e.find(".dropdown.dropdownOpen").each(function(t,i){var n=$(i),a=n.wcfIdentify(),s=n.offset(),o=e.offset(),r=$(i).height()/2;s.top+r<=o.top?WCF.Dropdown.toggleDropdown(a):s.top>=o.top+e.height()?WCF.Dropdown.toggleDropdown(a):s.left<=o.left?WCF.Dropdown.toggleDropdown(a):s.left>=o.left+e.width()?WCF.Dropdown.toggleDropdown(a):WCF.Dropdown.setAlignmentByID(n.wcfIdentify())})},_scroll:function(){for(var t in this._dropdowns){var e=this._dropdowns[t];e.data("isOverlayDropdownButton")&&e.hasClass("dropdownOpen")&&this.setAlignmentByID(t)}},initDropdown:function(t,e){if(!t.hasClass("jsDropdownEnabled")&&!t.data("target")){var i=t.parents(".dropdown");if(!i.length)return console.debug("[WCF.Dropdown] Invalid dropdown passed, button '"+t.wcfIdentify()+"' does not have a parent with .dropdown, aborting."),void 0;var n=t.next(".dropdownMenu");if(!n.length)return console.debug("[WCF.Dropdown] Invalid dropdown passed, dropdown '"+i.wcfIdentify()+"' does not have a dropdown menu, aborting."),void 0;n.detach().appendTo(this._menuContainer);var a=i.wcfIdentify();this._dropdowns[a]||(t.addClass("jsDropdownEnabled").click($.proxy(this._toggle,this)),this._dropdowns[a]=i,this._menus[a]=n),t.data("target",a),e&&t.trigger("click")}},removeDropdown:function(t){this._menus[t]&&($(this._menus[t]).remove(),delete this._menus[t],delete this._dropdowns[t])},initDropdownFragment:function(t,e){var i=t.wcfIdentify();return this._dropdowns[i]?(console.debug("[WCF.Dropdown] Cannot register dropdown identified by '"+i+"' as a fragement."),void 0):(this._dropdowns[i]=t,this._menus[i]=e.detach().appendTo(this._menuContainer),void 0)},registerCallback:function(t,e){return $.isFunction(e)?(this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e),void 0):(console.debug("[WCF.Dropdown] Callback for '"+t+"' is invalid"),!1)},_toggle:function(t,e){var i=null===t?e:$(t.currentTarget).data("target"),n=this._dropdowns[i];if(n&&void 0===n.data("isOverlayDropdownButton")){var a=n.parents(".dialogContent");n.data("isOverlayDropdownButton",a.length>0),a.length&&a.on("scroll",this._dialogScroll)}for(var s in this._dropdowns){var o=this._dropdowns[s],r=this._menus[s];o.hasClass("dropdownOpen")?(o.removeClass("dropdownOpen"),r.removeClass("dropdownOpen"),this._notifyCallbacks(s,"close")):s===i&&(o.addClass("dropdownOpen"),r.addClass("dropdownOpen"),this._notifyCallbacks(s,"open"),this.setAlignment(o,r))}return null!==t?(t.stopPropagation(),!1):void 0},toggleDropdown:function(t){this._toggle(null,t)},getDropdown:function(t){return this._dropdowns[t]?this._dropdowns[t]:null},getDropdownMenu:function(t){return this._menus[t]?this._menus[t]:null},setAlignmentByID:function(t){var e=this.getDropdown(t);null===e&&console.debug("[WCF.Dropdown] Unable to find dropdown identified by '"+t+"'");var i=this.getDropdownMenu(t);null===i&&console.debug("[WCF.Dropdown] Unable to find dropdown menu identified by '"+t+"'"),this.setAlignment(e,i)},setAlignment:function(t,e){e.data("isInitialized")||e.data("isInitialized",!0).css({left:0,top:0});var i=t.getDimensions("outer"),n=t.getOffsets("offset"),a=e.getDimensions("outer"),s=$(window).width(),o=t.find(".dropdownToggle");o.hasClass("dropdownCaptionTextarea")&&(i=o.getDimensions("outer"));var r="left";n.left+a.width>s&&(r="right");var l="auto",c="auto";if("left"===r?(e.removeClass("dropdownArrowRight"),l=n.left):(e.addClass("dropdownArrowRight"),c=s-(n.left+i.width)),"rtl"==WCF.Language.get("wcf.global.pageDirection")){var h=l,d=c;"auto"==l?e.removeClass("dropdownArrowRight"):(c=s-(n.left+i.width),l="auto",c+a.width>s&&(l=h,c=d,e.addClass("dropdownArrowRight")))}"auto"==l?c+="px":l+="px";var u=!0;e.hasClass("dropdownOpen")&&(u=!1,e.removeClass("dropdownOpen"));var p="auto",_=n.top+i.height+7;_+a.height>$(window).height()+$(document).scrollTop()?(p=$(window).height()-n.top+10,_="auto",e.addClass("dropdownArrowBottom")):e.removeClass("dropdownArrowBottom"),u||e.addClass("dropdownOpen"),e.css({bottom:p,left:l,right:c,top:_})},_closeAll:function(){for(var t in this._dropdowns){var e=this._dropdowns[t];e.hasClass("dropdownOpen")&&(e.removeClass("dropdownOpen"),this._menus[t].removeClass("dropdownOpen"),this._notifyCallbacks(t,"close"))}},close:function(t){this._dropdowns[t]&&(this._dropdowns[t].removeClass("dropdownMenu"),this._menus[t].removeClass("dropdownMenu"))},_notifyCallbacks:function(t,e){if(this._callbacks[t])for(var i=0,n=this._callbacks[t].length;n>i;i++)this._callbacks[t][i](t,e)}},WCF.Clipboard={_actionProxy:null,_actionObjects:{},_containers:null,_containerData:{},_hasMarkedItems:!1,_markedObjectIDs:{},_page:"",_pageObjectID:0,_proxy:null,_trackedElements:{},init:function(t,e,i,n){this._page=t,this._actionObjects=i||{},this._hasMarkedItems=e>0,this._pageObjectID=parseInt(n)||0,this._actionProxy=new WCF.Action.Proxy({success:$.proxy(this._actionSuccess,this),url:"index.php/ClipboardProxy/?t="+SECURITY_TOKEN+SID_ARG_2ND}),this._proxy=new WCF.Action.Proxy({success:$.proxy(this._success,this),url:"index.php/Clipboard/?t="+SECURITY_TOKEN+SID_ARG_2ND}),this._containers=$(".jsClipboardContainer").each($.proxy(function(t,e){this._initContainer(e)},this)),this._hasMarkedItems&&this._containers.length&&this._loadMarkedItems();var a=this;WCF.DOMNodeInsertedHandler.addCallback("WCF.Clipboard",function(){a._containers=$(".jsClipboardContainer").each($.proxy(function(t,e){a._initContainer(e)},a))})},_loadMarkedItems:function(){new WCF.Action.Proxy({autoSend:!0,data:{containerData:this._containerData,pageClassName:this._page,pageObjectID:this._pageObjectID},success:$.proxy(this._loadMarkedItemsSuccess,this),url:"index.php/ClipboardLoadMarkedItems/?t="+SECURITY_TOKEN+SID_ARG_2ND})},reload:function(){null!==this._containers&&this._loadMarkedItems()},_loadMarkedItemsSuccess:function(t,e,i){this._resetMarkings();for(var n in t.markedItems){this._markedObjectIDs[n]||(this._markedObjectIDs[n]=[]);var a=t.markedItems[n];for(var s in a)this._markedObjectIDs[n].push(a[s]);this._containers.each($.proxy(function(t,e){var i=$(e);return i.data("type")!=n?!0:(i.find("input.jsClipboardItem").each($.proxy(function(t,e){var i=$(e);WCF.inArray(i.data("objectID"),this._markedObjectIDs[n])&&(i.prop("checked",!0),i.parents(".jsClipboardObject").addClass("jsMarked"))},this)),i.find("input.jsClipboardMarkAll").each(function(t,e){var n=!0;i.find("input.jsClipboardItem").each(function(t,e){var i=$(e);i.prop("checked")||(n=!1)}),n&&$(e).prop("checked",!0)}),void 0)},this))}this._success(t,e,i)},_resetMarkings:function(){this._containers.each($.proxy(function(t,e){var i=$(e);this._markedObjectIDs[i.data("type")]=[],i.find("input.jsClipboardItem, input.jsClipboardMarkAll").prop("checked",!1),i.find(".jsClipboardObject").removeClass("jsMarked")},this))},_initContainer:function(t){var e=$(t),i=e.wcfIdentify();this._trackedElements[i]||(e.find(".jsClipboardMarkAll").data("hasContainer",i).click($.proxy(this._markAll,this)),this._markedObjectIDs[e.data("type")]=[],this._containerData[e.data("type")]={},$.each(e.data(),$.proxy(function(t,i){t.match(/^type(.+)/)&&(this._containerData[e.data("type")][WCF.String.lcfirst(t.replace(/^type/,""))]=i)},this)),this._trackedElements[i]=[]),e.find("input.jsClipboardItem").each($.proxy(function(t,e){var n=$(e),a=n.wcfIdentify();WCF.inArray(a,this._trackedElements[i])||(this._trackedElements[i].push(a),n.data("hasContainer",i).click($.proxy(this._click,this)))},this))},_click:function(t){var e=$(t.target),i=e.data("objectID"),n=e.prop("checked")?!0:!1,a=[i];if(e.data("hasContainer"))var s=$("#"+e.data("hasContainer")),o=s.data("type");else var o=e.data("type");if(n?(this._markedObjectIDs[o].push(i),e.parents(".jsClipboardObject").addClass("jsMarked")):(this._markedObjectIDs[o]=$.removeArrayValue(this._markedObjectIDs[o],i),e.parents(".jsClipboardObject").removeClass("jsMarked")),e.data("hasContainer")){var r=!0;s.find("input.jsClipboardItem").each(function(t,e){var i=$(e);i.prop("checked")||(r=!1)}),s.find(".jsClipboardMarkAll").each(function(t,e){r?$(e).prop("checked",!0):$(e).prop("checked",!1)})}this._saveState(o,a,n)},_markAll:function(t){var e=$(t.target),i=[],n=!0;if(e.is("input")&&(n=e.prop("checked")),e.data("hasContainer"))var a=$("#"+e.data("hasContainer")),s=a.data("type");else var s=e.data("type");e.data("hasContainer")&&(a.find("input.jsClipboardItem").each($.proxy(function(t,e){var a=$(e),o=a.data("objectID");n?a.prop("checked")||(a.prop("checked",!0),this._markedObjectIDs[s].push(o),i.push(o)):a.prop("checked")&&(a.prop("checked",!1),this._markedObjectIDs[s]=$.removeArrayValue(this._markedObjectIDs[s],o),i.push(o))},this)),n?a.find(".jsClipboardObject").addClass("jsMarked"):a.find(".jsClipboardObject").removeClass("jsMarked")),this._saveState(s,i,n)},_saveState:function(t,e,i){this._proxy.setOption("data",{action:i?"mark":"unmark",containerData:this._containerData,objectIDs:e,pageClassName:this._page,pageObjectID:this._pageObjectID,type:t}),this._proxy.sendRequest()},_success:function(data,textStatus,jqXHR){var $containers={};if($(".jsClipboardEditor").each(function(index,container){for(var $container=$(container),$types=eval($container.data("types")),$i=0,$length=$types.length;$length>$i;$i++){var $typeName=$types[$i];$containers[$typeName]=$container}var $containerID=$container.wcfIdentify();WCF.CloseOverlayHandler.removeCallback($containerID),$container.empty()}),data.items)for(var $typeName in data.items)if($containers[$typeName]){var $container=$containers[$typeName],$list=$container.children("ul");0==$list.length&&($list=$("<ul />").appendTo($container));var $editor=data.items[$typeName],$label=$('<li class="dropdown"><span class="dropdownToggle button">'+$editor.label+"</span></li>").appendTo($list),$itemList=$('<ol class="dropdownMenu"></ol>').appendTo($label);for(var $itemIndex in $editor.items){var $item=$editor.items[$itemIndex],$listItem=$("<li><span>"+$item.label+"</span></li>").appendTo($itemList);$listItem.data("container",$container),$listItem.data("objectType",$typeName),$listItem.data("actionName",$item.actionName).data("parameters",$item.parameters),$listItem.data("internalData",$item.internalData).data("url",$item.url).data("type",$typeName),$listItem.click($.proxy(this._executeAction,this))}$('<li class="dropdownDivider" />').appendTo($itemList),$("<li><span>"+WCF.Language.get("wcf.clipboard.item.unmarkAll")+"</span></li>").appendTo($itemList).click($.proxy(function(){this._proxy.setOption("data",{action:"unmarkAll",type:$typeName}),this._proxy.setOption("success",$.proxy(function(t,e,i){this._containers.each($.proxy(function(t,e){var i=$(e);return i.data("type")==$typeName?(i.find(".jsClipboardMarkAll, .jsClipboardItem").prop("checked",!1),i.find(".jsClipboardObject").removeClass("jsMarked"),!1):void 0},this)),this._success(t,e,i),this._proxy.setOption("success",$.proxy(this._success,this))},this)),this._proxy.sendRequest()},this)),WCF.Dropdown.initDropdown($label.children(".dropdownToggle"),!1)}},_closeLists:function(){$(".jsClipboardEditor ul").removeClass("dropdownOpen")},_executeAction:function(t){var e=$(t.currentTarget),i=e.data("url");if(i&&(window.location.href=i),e.data("parameters").className&&e.data("parameters").actionName&&("unmarkAll"===e.data("parameters").actionName||e.data("parameters").objectIDs)){var n=e.data("internalData").confirmMessage;if(n){var a=e.data("internalData").template;a&&(a=$(a)),WCF.System.Confirmation.show(n,$.proxy(function(t){if("confirm"===t){var i={};a&&a.length&&$("#wcfSystemConfirmationContent").find("input, select, textarea").each(function(t,e){var n=$(e);i[n.prop("name")]=n.val()}),this._executeAJAXActions(e,i)}},this),"",a)}else this._executeAJAXActions(e,{})}e.data("container").trigger("clipboardAction",[e.data("type"),e.data("actionName"),e.data("parameters")])},_executeAJAXActions:function(t,e){e=e||{};var i=[];"unmarkAll"!==t.data("parameters").actionName&&$.each(t.data("parameters").objectIDs,function(t,e){i.push(parseInt(e))});var n={data:e,containerData:this._containerData[t.data("type")]},a=t.data("internalData").parameters;if(void 0!==a)for(var s in a)n[s]=a[s];new WCF.Action.Proxy({autoSend:!0,data:{actionName:t.data("parameters").actionName,className:t.data("parameters").className,objectIDs:i,parameters:n},success:$.proxy(function(e){"unmarkAll"!==t.data("parameters").actionName&&t.data("container").trigger("clipboardActionResponse",[e,t.data("type"),t.data("actionName"),t.data("parameters")]),this._loadMarkedItems()},this)}),this._actionObjects[t.data("objectType")]&&this._actionObjects[t.data("objectType")][t.data("parameters").actionName]&&this._actionObjects[t.data("objectType")][t.data("parameters").actionName].triggerEffect(i)},sendRequest:function(t){var e=$(t);this._actionProxy.setOption("data",{parameters:e.data("parameters"),typeName:e.data("type")}),this._actionProxy.sendRequest()}},WCF.PeriodicalExecuter=Class.extend({_callback:null,_delay:0,_intervalID:null,_isExecuting:!1,init:function(t,e){return $.isFunction(t)?(this._callback=t,this._interval=e,this.resume(),void 0):(console.debug("[WCF.PeriodicalExecuter] Given callback is invalid, aborting."),void 0)},_execute:function(){if(!this._isExecuting)try{this._isExecuting=!0,this._callback(this),this._isExecuting=!1}catch(t){throw this._isExecuting=!1,t}},stop:function(){this._intervalID&&clearInterval(this._intervalID)},resume:function(){this._intervalID&&this.stop(),this._intervalID=setInterval($.proxy(this._execute,this),this._interval)}}),WCF.LoadingOverlayHandler={_activeRequests:0,_loadingOverlay:null,_pending:null,show:function(){if(null===this._loadingOverlay){this._loadingOverlay=$('<div class="spinner"><span class="icon icon48 icon-spinner" /> <span>'+WCF.Language.get("wcf.global.loading")+"</span></div>").appendTo($("body"));var t=this._loadingOverlay.outerWidth();70>t&&(t=70),this._loadingOverlay.css({marginLeft:Math.ceil(-1*t/2),width:t}).hide()}if(this._activeRequests++,1==this._activeRequests&&null===this._pending){var e=this;this._pending=new WCF.PeriodicalExecuter(function(t){e._activeRequests&&e._loadingOverlay.stop(!0,!0).fadeIn(100),t.stop(),e._pending=null},250)}},hide:function(){this._activeRequests--,0==this._activeRequests&&(null!==this._pending&&(this._pending.stop(),this._pending=null),this._loadingOverlay.stop(!0,!0).fadeOut(100))},updateIcon:function(t,e){var i=void 0===e||e?"addClass":"removeClass";t.find(".icon")[i]("icon-spinner"),t.hasClass("icon")&&t[i]("icon-spinner")}},WCF.Action={},WCF.Action.Proxy=Class.extend({_showLoadingOverlayOnce:!1,_suppressErrors:!1,_lastRequest:null,init:function(t){this.options=$.extend(!0,{autoSend:!1,data:{},dataType:"json",after:null,init:null,jsonp:"callback",async:!0,failure:null,showLoadingOverlay:!0,success:null,suppressErrors:!1,type:"POST",url:"index.php/AJAXProxy/?t="+SECURITY_TOKEN+SID_ARG_2ND,aborted:null,autoAbortPrevious:!1},t),this.confirmationDialog=null,this.loading=null,this._showLoadingOverlayOnce=!1,this._suppressErrors=this.options.suppressErrors===!0,this.options.autoSend&&this.sendRequest();var e=this;$(window).on("beforeunload",function(){e._suppressErrors=!0})},sendRequest:function(t){return this._init(),(t||this.options.autoAbortPrevious)&&this.abortPrevious(),this._lastRequest=$.ajax({data:this.options.data,dataType:this.options.dataType,jsonp:this.options.jsonp,async:this.options.async,type:this.options.type,url:this.options.url,success:$.proxy(this._success,this),error:$.proxy(this._failure,this)}),this._lastRequest
},abortPrevious:function(){null!==this._lastRequest&&(this._lastRequest.abort(),this._lastRequest=null)},showLoadingOverlayOnce:function(){this._showLoadingOverlayOnce=!0},suppressErrors:function(){this._suppressErrors=!0},_init:function(){$.isFunction(this.options.init)&&this.options.init(this),(this.options.showLoadingOverlay||this._showLoadingOverlayOnce)&&WCF.LoadingOverlayHandler.show()},_failure:function(t,e,i){if("abort"==e)return $.isFunction(this.options.aborted)&&this.options.aborted(t),void 0;try{var n=$.parseJSON(t.responseText),a=!0;if($.isFunction(this.options.failure)&&(a=this.options.failure(n,t,e,i)),!this._suppressErrors&&a!==!1){var s="";n.stacktrace?s="<br /><p>Stacktrace:</p><p>"+n.stacktrace+"</p>":n.exceptionID&&(s="<br /><p>Exception ID: <code>"+n.exceptionID+"</code></p>"),$('<div class="ajaxDebugMessage"><p>'+n.message+"</p>"+s+"</div>").wcfDialog({title:WCF.Language.get("wcf.global.error.title")})}}catch(o){var a=!0;if($.isFunction(this.options.failure)&&(a=this.options.failure(null,t,e,i)),!this._suppressErrors&&a!==!1){var r="timeout"===e?WCF.Language.get("wcf.global.error.timeout"):t.responseText;r&&"undefined"!=r&&$('<div class="ajaxDebugMessage"><p>'+r+"</p></div>").wcfDialog({title:WCF.Language.get("wcf.global.error.title")})}}this._after()},_success:function(t,e,i){$.isFunction(this.options.success)&&(t&&t.returnValues&&void 0!==t.returnValues.template&&(t.returnValues.template=$.trim(t.returnValues.template)),this.options.success(t,e,i)),this._after()},_after:function(){this._lastRequest=null,$.isFunction(this.options.after)&&this.options.after(),(this.options.showLoadingOverlay||this._showLoadingOverlayOnce)&&(WCF.LoadingOverlayHandler.hide(),this._showLoadingOverlayOnce&&(this._showLoadingOverlayOnce=!1)),WCF.DOMNodeInsertedHandler.execute(),$("a[href*=#]").each(function(t,e){var i=$(e);if(-1!=i.prop("href").indexOf("AJAXProxy")){var n=i.prop("href").substr(i.prop("href").indexOf("#")),a=document.location.toString().replace(/#.*/,"");i.prop("href",a+n)}})},setOption:function(t,e){this.options[t]=e}}),WCF.Action.SimpleProxy=Class.extend({init:function(t,e){this.options=$.extend(!0,{action:"",className:"",elements:null,eventName:"click"},t),this.callbacks=$.extend(!0,{after:null,failure:null,init:null,success:null},e),this.options.elements&&(this.proxy=new WCF.Action.Proxy(this.callbacks),this.options.elements.each($.proxy(function(t,e){$(e).bind(this.options.eventName,$.proxy(this._handleEvent,this))},this)))},_handleEvent:function(t){this.proxy.setOption("data",{actionName:this.options.action,className:this.options.className,objectIDs:[$(t.target).data("objectID")]}),this.proxy.sendRequest()}}),WCF.Action.Delete=Class.extend({_buttonSelector:"",_className:"",_containerSelector:"",_containers:[],init:function(t,e,i){this._containerSelector=e,this._className=t,this._buttonSelector=i?i:".jsDeleteButton",this.proxy=new WCF.Action.Proxy({success:$.proxy(this._success,this)}),this._initElements(),WCF.DOMNodeInsertedHandler.addCallback("WCF.Action.Delete"+this._className.hashCode(),$.proxy(this._initElements,this))},_initElements:function(){var t=this;$(this._containerSelector).each(function(e,i){var n=$(i),a=n.wcfIdentify();WCF.inArray(a,t._containers)||(t._containers.push(a),n.find(t._buttonSelector).click($.proxy(t._click,t)))})},_click:function(t){var e=$(t.currentTarget);t.preventDefault(),e.data("confirmMessage")?WCF.System.Confirmation.show(e.data("confirmMessage"),$.proxy(this._execute,this),{target:e}):(WCF.LoadingOverlayHandler.updateIcon(e),this._sendRequest(e))},_didTriggerEffect:function(){},_execute:function(t,e){"cancel"!==t&&(WCF.LoadingOverlayHandler.updateIcon(e.target),this._sendRequest(e.target))},_sendRequest:function(t){this.proxy.setOption("data",{actionName:"delete",className:this._className,interfaceName:"wcf\\data\\IDeleteAction",objectIDs:[$(t).data("objectID")]}),this.proxy.sendRequest()},_success:function(t){this.triggerEffect(t.objectIDs)},triggerEffect:function(t){for(var e in this._containers){var i=$("#"+this._containers[e]);if(WCF.inArray(i.find(this._buttonSelector).data("objectID"),t)){var n=this;i.wcfBlindOut("up",function(){$(this).remove(),n._containers.splice(n._containers.indexOf($(this).wcfIdentify()),1),n._didTriggerEffect($(this))})}}}}),WCF.Action.NestedDelete=WCF.Action.Delete.extend({triggerEffect:function(t){for(var e in this._containers){var i=$("#"+this._containers[e]);if(WCF.inArray(i.find(this._buttonSelector).data("objectID"),t))if(i.has("ol").has("li").length)i.is(":only-child")?i.parent().replaceWith(i.find("> ol")):i.replaceWith(i.find("> ol > li")),this._containers.splice(this._containers.indexOf(i.wcfIdentify()),1),this._didTriggerEffect(i);else{var n=this;i.wcfBlindOut("up",function(){$(this).remove(),n._containers.splice(n._containers.indexOf($(this).wcfIdentify()),1),n._didTriggerEffect($(this))})}}}}),WCF.Action.Toggle=Class.extend({_buttonSelector:".jsToggleButton",_className:"",_containerSelector:"",_containers:[],init:function(t,e,i){this._containerSelector=e,this._className=t,this._buttonSelector=i?i:".jsToggleButton",this._containers=[];var n={success:$.proxy(this._success,this)};this.proxy=new WCF.Action.Proxy(n),this._initElements(),WCF.DOMNodeInsertedHandler.addCallback("WCF.Action.Toggle"+this._className.hashCode(),$.proxy(this._initElements,this))},_initElements:function(){$(this._containerSelector).each($.proxy(function(t,e){var i=$(e),n=i.wcfIdentify();WCF.inArray(n,this._containers)||(this._containers.push(n),i.find(this._buttonSelector).click($.proxy(this._click,this)))},this))},_click:function(t){var e=$(t.currentTarget);t.preventDefault(),e.data("confirmMessage")?WCF.System.Confirmation.show(e.data("confirmMessage"),$.proxy(this._execute,this),{target:e}):(WCF.LoadingOverlayHandler.updateIcon(e),this._sendRequest(e))},_execute:function(t,e){"cancel"!==t&&(WCF.LoadingOverlayHandler.updateIcon(e.target),this._sendRequest(e.target))},_sendRequest:function(t){this.proxy.setOption("data",{actionName:"toggle",className:this._className,interfaceName:"wcf\\data\\IToggleAction",objectIDs:[$(t).data("objectID")]}),this.proxy.sendRequest()},_success:function(t){this.triggerEffect(t.objectIDs)},triggerEffect:function(t){for(var e in this._containers){var i=$("#"+this._containers[e]),n=i.find(this._buttonSelector);WCF.inArray(n.data("objectID"),t)&&(i.wcfHighlight(),this._toggleButton(i,n))}},_toggleButton:function(t,e){WCF.LoadingOverlayHandler.updateIcon(e,!1),e.hasClass("icon-check-empty")?(e.removeClass("icon-check-empty").addClass("icon-check"),$newTitle=e.data("disableTitle")?e.data("disableTitle"):WCF.Language.get("wcf.global.button.disable"),e.attr("title",$newTitle)):(e.removeClass("icon-check").addClass("icon-check-empty"),$newTitle=e.data("enableTitle")?e.data("enableTitle"):WCF.Language.get("wcf.global.button.enable"),e.attr("title",$newTitle)),t.toggleClass("disabled")}}),WCF.Action.Scroll=Class.extend({_callback:null,_reference:null,_target:null,_threshold:0,init:function(t,e,i,n){return this._threshold=parseInt(t),0===this._threshold?(console.debug("[WCF.Action.Scroll] Given threshold is invalid, aborting."),void 0):($.isFunction(e)&&(this._callback=e),null===this._callback?(console.debug("[WCF.Action.Scroll] Given callback is invalid, aborting."),void 0):(this._reference=$(i?i:window),this._target=$(n?n:document),this.start(),this._scroll(),void 0))},_scroll:function(){var t=this._target.height(),e=this._reference.scrollTop(),i=this._reference.height();t-(i+e)<this._threshold&&this._callback(this)},start:function(){this._reference.on("scroll",$.proxy(this._scroll,this))},stop:function(){this._reference.off("scroll")}}),WCF.Date={},WCF.Date.Picker={_dateFormat:"yy-mm-dd",_timeFormat:"g:ia",init:function(){var t=$.timepicker.log;$.timepicker.log=function(e){-1==e.indexOf("Error parsing the date/time string: Unexpected literal at position")&&-1==e.indexOf("Error parsing the date/time string: Unknown name at position")&&t(e)},this._convertDateFormat(),this._initDatePicker(),WCF.DOMNodeInsertedHandler.addCallback("WCF.Date.Picker",$.proxy(this._initDatePicker,this))},_convertDateFormat:function(){var t={a:"tt",A:"TT",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"l",d:"dd",D:"D",j:"d",l:"DD",z:"o",S:"",F:"MM",m:"mm",M:"M",n:"m",o:"yy",Y:"yy",y:"y",U:"@"};this._dateFormat=WCF.Language.get("wcf.date.dateFormat").replace(/([^dDjlzSFmMnoYyU\\]*(?:\\.[^dDjlzSFmMnoYyU\\]*)*)([dDjlzSFmMnoYyU])/g,function(e,i,n){for(var a in t)n==a&&(n=t[a]);return i+n}),this._timeFormat=WCF.Language.get("wcf.date.timeFormat").replace(/([^aAgGhHisu\\]*(?:\\.[^aAgGhHisu\\]*)*)([aAgGhHisu])/g,function(e,i,n){for(var a in t)n==a&&(n=t[a]);return i+n})},_initDatePicker:function(){$("input[type=date]:not(.jsDatePicker), input[type=datetime]:not(.jsDatePicker)").each($.proxy(function(t,e){var i=$(e),n=i.prop("name"),a=i.val(),s="datetime"==i.attr("type");i.prop("type","text").addClass("jsDatePicker"),i.data("placeholder")&&i.attr("placeholder",i.data("placeholder")),i.removeAttr("name"),i.before('<input type="hidden" id="'+i.wcfIdentify()+'DatePicker" name="'+n+'" value="'+a+'" />');var o=i.attr("max")?new Date(i.attr("max").replace(" ","T")):null,r=i.attr("min")?new Date(i.attr("min").replace(" ","T")):null;$options={altField:"#"+i.wcfIdentify()+"DatePicker",altFormat:"yy-mm-dd",beforeShow:function(t,e){setTimeout(function(){e.dpDiv.position({my:"left top",at:"left bottom",collision:"none",of:t})},1)},changeMonth:!0,changeYear:!0,dateFormat:this._dateFormat,dayNames:WCF.Language.get("__days"),dayNamesMin:WCF.Language.get("__daysShort"),dayNamesShort:WCF.Language.get("__daysShort"),firstDay:parseInt(WCF.Language.get("wcf.date.firstDayOfTheWeek"))||0,isRTL:"rtl"==WCF.Language.get("wcf.global.pageDirection"),maxDate:o,minDate:r,monthNames:WCF.Language.get("__months"),monthNamesShort:WCF.Language.get("__monthsShort"),showButtonPanel:!1,onClose:function(t,e){""==t&&$(e.settings.altField).val(t)},showOtherMonths:!0,yearRange:i.hasClass("birthday")?"-100:+0":"1900:2038"},s&&(/[0-9]{2}:[0-9]{2}:[0-9]{2}$/.test(a)&&(a=a.replace(/:[0-9]{2}$/,""),i.val(a)),a=a.replace(" ","T"),$options=$.extend($options,{altFieldTimeOnly:!1,altTimeFormat:"HH:mm",controlType:"select",hourText:WCF.Language.get("wcf.date.hour"),minuteText:WCF.Language.get("wcf.date.minute"),showTime:!1,timeFormat:this._timeFormat,yearRange:i.hasClass("birthday")?"-100:+0":"1900:2038"})),s?i.datetimepicker($options):i.datepicker($options),a&&(s||(a=new Date(a),a.setMinutes(a.getMinutes()+a.getTimezoneOffset())),i.datepicker("setDate",a)),i.datepicker("widget").hide()},this))}},WCF.Date.Util={gmdate:function(t){var e=t?t:new Date;return Math.round(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDay(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())/1e3)},getTimezoneDate:function(t,e){var i=new Date(t),n=6e4*i.getTimezoneOffset();return new Date(t+n+e)}},WCF.Date.Time=Class.extend({_date:0,_elements:null,_offset:null,_timestamp:0,init:function(){this._elements=$("time.datetime"),this._offset=null,this._timestamp=0,this._refresh(),new WCF.PeriodicalExecuter($.proxy(this._refresh,this),6e4),WCF.DOMNodeInsertedHandler.addCallback("WCF.Date.Time",$.proxy(this._domNodeInserted,this))},_domNodeInserted:function(){this._elements=$("time.datetime"),this._refresh()},_refresh:function(){this._date=new Date,this._timestamp=(this._date.getTime()-this._date.getMilliseconds())/1e3,null===this._offset&&(this._offset=this._timestamp-TIME_NOW),this._elements.each($.proxy(this._refreshElement,this))},_refreshElement:function(t,e){var i=$(e);i.attr("title")||i.attr("title",i.text());var n=i.data("timestamp")+this._offset,a=i.data("date"),s=i.data("time"),o=i.data("offset");if(!i.data("isFutureDate"))if(n>=this._timestamp||this._timestamp<n+60)i.text(WCF.Language.get("wcf.date.relative.now"));else if(this._timestamp<n+3540){var r=Math.max(Math.round((this._timestamp-n)/60),1);i.text(WCF.Language.get("wcf.date.relative.minutes",{minutes:r}))}else if(this._timestamp<n+86400){var l=Math.round((this._timestamp-n)/3600);i.text(WCF.Language.get("wcf.date.relative.hours",{hours:l}))}else if(this._timestamp<n+518400){var c=new Date(this._date.getFullYear(),this._date.getMonth(),this._date.getDate()),h=Math.ceil((c/1e3-n)/86400),d=WCF.Date.Util.getTimezoneDate(1e3*n,1e3*o),u=d.getDay(),p=WCF.Language.get("__days")[u];i.text(WCF.Language.get("wcf.date.relative.pastDays",{days:h,day:p,time:s}))}else{var _=WCF.Language.get("wcf.date.shortDateTimeFormat");i.text(_.replace(/\%date\%/,a).replace(/\%time\%/,s))}}}),WCF.Dictionary=Class.extend({_variables:{},init:function(){this._variables={}},add:function(t,e){this._variables[t]=e},addObject:function(t){for(var e in t)this.add(e,t[e])},addDictionary:function(t){t.each($.proxy(function(t){this.add(t.key,t.value)},this))},get:function(t){return this.isset(t)?this._variables[t]:null},isset:function(t){return this._variables.hasOwnProperty(t)},remove:function(t){delete this._variables[t]},each:function(t){if($.isFunction(t))for(var e in this._variables){var i=this._variables[e],n={key:e,value:i};t(n)}},count:function(){return $.getLength(this._variables)},isEmpty:function(){return!this.count()}}),WCF.Language={_variables:new WCF.Dictionary,add:function(t,e){this._variables.add(t,e)},addObject:function(t){this._variables.addObject(t)},get:function(t,e){if(null==e)var e={};var i=this._variables.get(t);return null===i?t:"string"==typeof i?(this.add(t,new WCF.Template(i)),this.get(t,e)):("function"==typeof i.fetch&&(i=i.fetch(e)),i)}},WCF.MultipleLanguageInput=Class.extend({_availableLanguages:{},_button:null,_didInit:!1,_element:null,_insertedDataAfterInit:!1,_isEnabled:!1,_forceSelection:!1,_languageID:0,_list:null,_values:null,init:function(t,e,i,n){if(this._button=null,this._element=$("#"+$.wcfEscapeID(t)),this._forceSelection=e,this._values=i,this._availableLanguages=n,$.getLength(this._values))for(var a in this._values)this._values[a]=WCF.String.unescapeHTML(this._values[a]);if(this._languageID=LANGUAGE_ID,0==this._element.length)return console.debug("[WCF.MultipleLanguageInput] element id '"+t+"' is unknown"),void 0;var s=$.getLength(this._values)>0?!0:!1;this._insertedDataAfterInit=s,this._prepareElement(s),this._element.parents("form").submit($.proxy(this._submit,this)),this._didInit=!0},_prepareElement:function(t){this._element.wrap('<div class="dropdown preInput" />');var e=this._element.parent();this._button=$('<p class="button dropdownToggle"><span>'+WCF.Language.get("wcf.global.button.disabledI18n")+"</span></p>").prependTo(e),this._list=$('<ul class="dropdownMenu"></ul>').insertAfter(this._button),this._button.nextAll("textarea").length?this._button.addClass("dropdownCaptionTextarea"):this._button.addClass("dropdownCaption");for(var i in this._availableLanguages)$("<li><span>"+this._availableLanguages[i]+"</span></li>").data("languageID",i).click($.proxy(this._changeLanguage,this)).appendTo(this._list);this._forceSelection||($('<li class="dropdownDivider" />').appendTo(this._list),$("<li><span>"+WCF.Language.get("wcf.global.button.disabledI18n")+"</span></li>").click($.proxy(this._disable,this)).appendTo(this._list)),WCF.Dropdown.initDropdown(this._button,t),(t||this._forceSelection)&&(this._isEnabled=!0,this._list.children("li").each($.proxy(function(t,e){var i=$(e);i.data("languageID")==this._languageID&&i.trigger("click")},this))),WCF.Dropdown.registerCallback(e.wcfIdentify(),$.proxy(this._handleAction,this))},_handleAction:function(t,e){"open"===e?this._enable():this._closeSelection()},_enable:function(){if(!this._isEnabled){var t=this._button.is("p")?this._button.children("span:eq(0)"):this._button;t.addClass("active"),this._isEnabled=!0}this._list.is(":visible")&&this._showSelection()},_showSelection:function(){this._isEnabled&&this._list.children("li").each($.proxy(function(t,e){var i=$(e),n=i.data("languageID");n&&(this._values[n]&&""!=this._values[n]?i.removeClass("missingValue"):i.addClass("missingValue"))},this))},_closeSelection:function(){this._disable()},_changeLanguage:function(t){var e=$(t.currentTarget);this._insertedDataAfterInit=!0,this._didInit&&(this._values[this._languageID]=this._element.val()),this._languageID=e.data("languageID"),this._values[this._languageID]?this._element.val(this._values[this._languageID]):this._element.val(""),this._list.children("li").removeClass("active"),e.addClass("active"),this._button.children("span").addClass("active").text(this._availableLanguages[this._languageID]),this._didInit&&this._element.blur().focus()},_disable:function(t){void 0===t&&this._insertedDataAfterInit&&(t=null),!this._forceSelection&&this._list&&null!==t&&(this._button.children("span").removeClass("active").text(WCF.Language.get("wcf.global.button.disabledI18n")),this._values[LANGUAGE_ID]?this._element.val(this._values[LANGUAGE_ID]):this._element.val(),t&&(this._list.children("li").removeClass("active"),$(t.currentTarget).addClass("active")),this._element.blur().focus(),this._insertedDataAfterInit=!1,this._isEnabled=!1,this._values={})},_submit:function(){if(!this._isEnabled)return 3735928559;this._languageID&&(this._values[this._languageID]=this._element.val());var t=$(this._element.parents("form")[0]),e=this._element.attr("name");for(var i in this._availableLanguages)void 0===this._values[i]&&(this._values[i]=""),$('<input type="hidden" name="'+e+"_i18n["+i+']" value="'+WCF.String.escapeHTML(this._values[i])+'" />').appendTo(t);this._element.removeAttr("name")}}),WCF.Number={round:function(t,e){return e=Math.pow(10,e||0),Math.round(t*e)/e}},WCF.String={addThousandsSeparator:function(t){return String(t).replace(/(^-?\d{1,3}|\d{3})(?=(?:\d{3})+(?:$|\.))/g,"$1"+WCF.Language.get("wcf.global.thousandsSeparator"))},escapeHTML:function(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},escapeRegExp:function(t){return String(t).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},formatNumeric:function(t,e){return t=String(WCF.Number.round(t,e||2)),t=t.replace(".",WCF.Language.get("wcf.global.decimalPoint")),t=this.addThousandsSeparator(t),t=t.replace("-","−")},lcfirst:function(t){return String(t).substring(0,1).toLowerCase()+t.substring(1)},ucfirst:function(t){return String(t).substring(0,1).toUpperCase()+t.substring(1)},unescapeHTML:function(t){return String(t).replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">")}},WCF.TabMenu={_containers:{},_didInit:!1,init:function(){var t=$(".tabMenuContainer:not(.staticTabMenuContainer)"),e=this;t.each(function(t,i){var n=$(i),a=n.wcfIdentify();return e._containers[a]?!0:(n.data("store")&&!$("#"+n.data("store")).length&&$('<input type="hidden" name="'+n.data("store")+'" value="" id="'+n.data("store")+'" />').appendTo(n.parents("form").find(".formSubmit")),e._containers[a]=n,n.wcfTabs({active:!1,activate:function(t,e){for(var i=$(e.newPanel),n=i.closest(".tabMenuContainer"),a=n;;){if(void 0===a.data("isParent"))break;if(a.data("isParent")){a.data("store")&&$("#"+a.data("store")).val(i.attr("id"));break}a=a.data("parent")}WCF.TabMenu._didInit&&(void 0==i.data("inTabMenu")&&i.data("inTabMenu",i.parents(".dialogContainer").length),i.data("inTabMenu")||(window.history?window.history.pushState(null,document.title,window.location.toString().replace(/#.+$/,"")+"#"+i.attr("id")):location.hash="#"+i.attr("id")))}}),n.data("isParent",n.children(".tabMenuContainer, .tabMenuContent").length>0).data("parent",!1),n.data("isParent")||n.parent().hasClass("tabMenuContainer")&&n.data("parent",n.parent()),void 0)}),this._didInit||(this._selectActiveTab(),$(window).bind("hashchange",$.proxy(this.selectTabs,this)),this._selectErroneousTab()||this.selectTabs()),this._didInit=!0},reload:function(){this._containers={},this.init()},_selectErroneousTab:function(){var t=!1;for(var e in this._containers){var i=this._containers[e];if(i.find(".formError").length&&(t=!0,!i.data("isParent"))){for(;;){if(i.data("parent")===!1)break;i=i.data("parent").wcfTabs("selectTab",i.wcfIdentify())}return!0}}if(t)for(var e in this._containers){var i=this._containers[e],n=i.find(".formError:eq(0)");if(n.length){for(i.wcfTabs("selectTab",n.parents(".tabMenuContent").wcfIdentify());;){if(i.data("parent")===!1)break;i=i.data("parent").wcfTabs("selectTab",i.wcfIdentify())}return!0}}return!1},_selectActiveTab:function(){for(var t in this._containers){var e=this._containers[t];if(e.data("active")){var i=e.data("active"),n=null;if(/-/.test(i)){var a=i.split("-");i=a[0],n=a[1]}e.find(".tabMenuContent").each(function(t,a){var s=$(a);return s.wcfIdentify()==i?(e.wcfTabs("select",t),null!==n&&(s.hasClass("tabMenuContainer")?s.wcfTabs("selectTab",e.data("active")):e.wcfTabs("selectTab",e.data("active"))),!1):void 0})}}},selectTabs:function(){if(location.hash){var t=location.hash.substr(1),e=$("#"+$.wcfEscapeID(t));if(1===e.length&&e.hasClass("ui-tabs-panel")&&(e=e.parent(".ui-tabs"),e.length))return e.wcfTabs("selectTab",t),e.hasClass("ui-tabs-panel")&&(t=e.wcfIdentify(),e=e.parent(".ui-tabs"),e.length&&e.wcfTabs("selectTab",t)),!0}return!1}},WCF.Template=Class.extend({init:function(t){var e=new WCF.Dictionary,i=0;t=t.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/(\r\n|\n|\r)/g,"\\n"),t=t.replace(/\{literal\}(.*?)\{\/literal\}/g,$.proxy(function(t){var i="@@@@@@@@@@@"+Math.random()+"@@@@@@@@@@@";return e.add(i,t.replace(/\{\/?literal\}/g,"")),i},this)),t=t.replace(/\{\*.*?\*\}/g,"");var n=function(t){for(var e=t.split(""),i={},n=!0,a="",s="",o=!1,r=!1,l=!1,c=0,h=e.length;h>c;c++){var d=e[c];n&&"="!=d&&" "!=d?a+=d:n&&"="==d?(n=!1,r=!1,o=!1,l=!1):n||r||o||" "!=d?n||!r||l||"'"!=d?n||r||o||"'"!=d?n||!o||l||'"'!=d?n||r||o||'"'!=d?n||!o&&!r||l||"\\"!=d?n||(l=!1,s+=d):(l=!0,s+=d):(o=!0,s+=d):(o=!1,s+=d):(r=!0,s+=d):(r=!1,s+=d):(n=!0,i[a]=s,s=a="")}if(i[a]=s,o||r||l)throw new Error('Syntax error in parameterList: "'+t+'"');return i},a=function(t){return t.replace(/\\n/g,"\n").replace(/\\\\/g,"\\").replace(/\\'/g,"'")};t=t.replace(/\{(\$[^\}]+?)\}/g,function(t,e){return e=a(e.replace(/\$([^.\[\s]+)/g,"(v['$1'])")),"' + WCF.String.escapeHTML("+e+") + '"}).replace(/\{#(\$[^\}]+?)\}/g,function(t,e){return e=a(e.replace(/\$([^.\[\s]+)/g,"(v['$1'])")),"' + WCF.String.formatNumeric("+e+") + '"}).replace(/\{@(\$[^\}]+?)\}/g,function(t,e){return e=a(e.replace(/\$([^.\[\s]+)/g,"(v['$1'])")),"' + "+e+" + '"}).replace(/{lang}(.+?){\/lang}/g,function(t,e){return"' + WCF.Language.get('"+a(e)+"') + '"}).replace(/\{if (.+?)\}/g,function(t,e){return e=a(e.replace(/\$([^.\[\s]+)/g,"(v['$1'])")),"';\nif ("+e+") {\n"+"	$output += '"}).replace(/\{else ?if (.+?)\}/g,function(t,e){return e=a(e.replace(/\$([^.\[\s]+)/g,"(v['$1'])")),"';\n}\nelse if ("+e+") {\n"+"	$output += '"}).replace(/\{implode (.+?)\}/g,function(t,e){i++,e=e.replace(/\\\\/g,"\\").replace(/\\'/g,"'");var a=n(e);if("undefined"==typeof a.from)throw new Error("Missing from attribute in implode-tag");if("undefined"==typeof a.item)throw new Error("Missing item attribute in implode-tag");return"undefined"==typeof a.glue&&(a.glue="', '"),a.from=a.from.replace(/\$([^.\[\s]+)/g,"(v.$1)"),"';\nvar $implode_"+i+" = false;\n"+"for ($implodeKey_"+i+" in "+a.from+") {\n"+"	v["+a.item+"] = "+a.from+"[$implodeKey_"+i+"];\n"+("undefined"!=typeof a.key?"		v["+a.key+"] = $implodeKey_"+i+";\n":"")+"	if ($implode_"+i+") $output += "+a.glue+";\n"+"	$implode_"+i+" = true;\n"+"	$output += '"}).replace(/\{foreach (.+?)\}/g,function(t,e){i++,e=e.replace(/\\\\/g,"\\").replace(/\\'/g,"'");var a=n(e);if("undefined"==typeof a.from)throw new Error("Missing from attribute in foreach-tag");if("undefined"==typeof a.item)throw new Error("Missing item attribute in foreach-tag");return a.from=a.from.replace(/\$([^.\[\s]+)/g,"(v.$1)"),"';\n$foreach_"+i+" = false;\n"+"for ($foreachKey_"+i+" in "+a.from+") {\n"+"	$foreach_"+i+" = true;\n"+"	break;\n"+"}\n"+"if ($foreach_"+i+") {\n"+"	for ($foreachKey_"+i+" in "+a.from+") {\n"+"		v["+a.item+"] = "+a.from+"[$foreachKey_"+i+"];\n"+("undefined"!=typeof a.key?"		v["+a.key+"] = $foreachKey_"+i+";\n":"")+"		$output += '"}).replace(/\{foreachelse\}/g,"';\n	}\n}\nelse {\n	{\n		$output += '").replace(/\{\/foreach\}/g,"';\n	}\n}\n$output += '").replace(/\{else\}/g,"';\n}\nelse {\n	$output += '").replace(/\{\/(if|implode)\}/g,"';\n}\n$output += '");for(var s in WCF.Template.callbacks)t=WCF.Template.callbacks[s](t);t=t.replace("{ldelim}","{").replace("{rdelim}","}"),e.each(function(e){t=t.replace(e.key,e.value)}),t="$output += '"+t+"';";try{this.fetch=new Function("v","if (typeof v != 'object') { v = {}; } v.__window = window; v.__wcf = window.WCF; var $output = ''; "+t+" return $output;")}catch(o){throw console.debug("var $output = ''; "+t+" return $output;"),o}},fetch:function(){}}),WCF.Template.callbacks=[],WCF.ToggleOptions=Class.extend({_element:null,_showItems:[],_hideItems:[],_callback:null,init:function(t,e,i,n){this._element=$("#"+t),this._showItems=e,this._hideItems=i,void 0!==n&&(this._callback=n),this._element.click($.proxy(this._toggle,this)),this._toggle()},_toggle:function(){if(this._element.prop("checked")){for(var t=0,e=this._showItems.length;e>t;t++){var i=this._showItems[t];$("#"+i).show()}for(var t=0,e=this._hideItems.length;e>t;t++){var i=this._hideItems[t];$("#"+i).hide()}null!==this._callback&&this._callback()}}}),WCF.Collapsible={},WCF.Collapsible.Simple={init:function(){$(".jsCollapsible").each($.proxy(function(t,e){this._initButton(e)},this))},_initButton:function(t){var e=$(t),i=e.data("isOpen");i||$("#"+e.data("collapsibleContainer")).hide(),e.click($.proxy(this._toggle,this))},_toggle:function(t){var e=$(t.currentTarget),i=e.data("isOpen"),n=$("#"+$.wcfEscapeID(e.data("collapsibleContainer")));return i?(n.stop().wcfBlindOut("vertical",$.proxy(function(){this._toggleImage(e)},this)),i=!1):(n.stop().wcfBlindIn("vertical",$.proxy(function(){this._toggleImage(e)},this)),i=!0),e.data("isOpen",i),t.stopPropagation(),!1},_toggleImage:function(t){var e=t.find("span.icon");t.data("isOpen")?e.removeClass("icon-chevron-right").addClass("icon-chevron-down"):e.removeClass("icon-chevron-down").addClass("icon-chevron-right")}},WCF.Collapsible.Remote=Class.extend({_className:"",_containers:{},_containerData:{},_proxy:null,init:function(t){this._className=t,this._proxy=new WCF.Action.Proxy({success:$.proxy(this._success,this)}),this._init(),WCF.DOMNodeInsertedHandler.addCallback("WCF.Collapsible.Remote",$.proxy(this._init,this))},_init:function(){this._getContainers().each($.proxy(function(t,e){var i=$(e),n=i.wcfIdentify();void 0===this._containers[n]&&(this._containers[n]=i,this._initContainer(n))},this))},_initContainer:function(t){var e=this._getTarget(t),i=this._getButtonContainer(t),n=this._createButton(t,i);this._containerData[t]={button:n,buttonContainer:i,isOpen:this._containers[t].data("isOpen"),target:e},this._containers[t].data("isOpen")||$("#"+t).addClass("jsCollapsed")},_getContainers:function(){},_getTarget:function(){},_getButtonContainer:function(){},_createButton:function(t,e){var i=this._containers[t].data("isOpen"),n=$('<span class="collapsibleButton jsTooltip pointer icon icon16 icon-'+(i?"chevron-down":"chevron-right")+'" title="'+WCF.Language.get("wcf.global.button.collapsible")+'">').prependTo(e);return n.data("containerID",t).click($.proxy(this._toggleContainer,this)),n},_toggleContainer:function(t){var e=$(t.currentTarget),i=e.data("containerID"),n=this._containerData[i].isOpen,a=n?"open":"close",s=n?"close":"open";this._proxy.setOption("data",{actionName:"loadContainer",className:this._className,interfaceName:"wcf\\data\\ILoadableContainerAction",objectIDs:[this._getObjectID(i)],parameters:$.extend(!0,{containerID:i,currentState:a,newState:s},this._getAdditionalParameters(i))}),this._proxy.sendRequest(),$("#"+i).toggleClass("jsCollapsed")},_exchangeIcon:function(t,e){e=e||"spinner",t.removeClass("icon-chevron-down icon-chevron-right icon-spinner").addClass("icon-"+e)},_getObjectID:function(t){return $("#"+t).data("objectID")},_getAdditionalParameters:function(){return{}},_updateContent:function(t,e){this._containerData[t].target.html(e)},_success:function(t){if(t.returnValues.containerID){var e=t.returnValues.containerID;if(this._containers[e]){this._containerData[e].isOpen=t.returnValues.isOpen?!0:!1;var i=t.returnValues.isOpen?"open":"close";this._updateContent(e,$.trim(t.returnValues.content),i),this._exchangeIcon(this._containerData[e].button,t.returnValues.isOpen?"chevron-down":"chevron-right")}}}}),WCF.Collapsible.SimpleRemote=WCF.Collapsible.Remote.extend({init:function(t){this._super(t),this._proxy=new WCF.Action.Proxy({showLoadingOverlay:!1})},_initContainer:function(t){this._super(t),this._containerData[t].isOpen||(this._containerData[t].target.hide(),this._exchangeIcon(this._containerData[t].button,"chevron-right"))},_toggleContainer:function(t){var e=$(t.currentTarget),i=e.data("containerID"),n=this._containerData[i].isOpen,a=n?"open":"close",s=n?"close":"open";this._proxy.setOption("data",{actionName:"toggleContainer",className:this._className,interfaceName:"wcf\\data\\IToggleContainerAction",objectIDs:[this._getObjectID(i)],parameters:$.extend(!0,{containerID:i,currentState:a,newState:s},this._getAdditionalParameters(i))}),this._proxy.sendRequest(),this._exchangeIcon(this._containerData[i].button,"open"===s?"chevron-down":"chevron-right"),"open"===s?this._containerData[i].target.show():this._containerData[i].target.hide(),$("#"+i).toggleClass("jsCollapsed"),this._containerData[i].isOpen="open"===s?!0:!1}}),WCF.Collapsible.Sidebar=Class.extend({_button:null,_buttonHeight:0,_isOpen:!1,_mainContainer:null,_proxy:null,_sidebar:null,_sidebarHeight:0,_sidebarName:"",_sidebarOffset:0,_userPanelHeight:0,init:function(){if(this._sidebar=$(".sidebar:eq(0)"),!this._sidebar.length)return console.debug("[WCF.Collapsible.Sidebar] Could not find sidebar, aborting."),void 0;this._isOpen=this._sidebar.data("isOpen")?!0:!1,this._sidebarName=this._sidebar.data("sidebarName"),this._mainContainer=$("#main"),this._sidebarHeight=this._sidebar.height(),this._sidebarOffset=this._sidebar.getOffsets("offset").top,this._userPanelHeight=$("#topMenu").outerHeight(),this._button=$('<a class="collapsibleButton jsTooltip" title="'+WCF.Language.get("wcf.global.button.collapsible")+'" />').prependTo(this._sidebar),this._button.wrap("<span />"),this._button.click($.proxy(this._click,this)),this._buttonHeight=this._button.outerHeight(),WCF.DOMNodeInsertedHandler.execute(),this._proxy=new WCF.Action.Proxy({showLoadingOverlay:!1,url:"index.php/AJAXInvoke/?t="+SECURITY_TOKEN+SID_ARG_2ND}),$(document).scroll($.proxy(this._scroll,this)).resize($.proxy(this._scroll,this)),this._renderSidebar(),this._scroll();var t=$(window);this._sidebar.on("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",function(){t.trigger("resize")})},_click:function(){this._isOpen=this._isOpen?!1:!0,this._proxy.setOption("data",{actionName:"toggle",className:"wcf\\system\\user\\collapsible\\content\\UserCollapsibleSidebarHandler",isOpen:this._isOpen?1:0,sidebarName:this._sidebarName}),this._proxy.sendRequest(),this._renderSidebar()},_scroll:function(){var t=$(window),e=t.scrollTop(),i=Math.max(e-this._sidebarOffset,0),n=Math.min(this._mainContainer.height(),t.height()+e-this._sidebarOffset),a=0;if(n===i)a=this._sidebarOffset+this._sidebarHeight;else{a=i+(n-i)/2;var s=Math.max(Math.min(i-this._userPanelHeight,this._userPanelHeight),0);s>0&&(a+=s/2)}n-i-this._userPanelHeight<this._buttonHeight?a-=this._buttonHeight:a=Math.max(a-this._buttonHeight/2,0),this._button.css({top:a+"px"})},_renderSidebar:function(){this._isOpen?$(".sidebarOrientationLeft, .sidebarOrientationRight").removeClass("sidebarCollapsed"):$(".sidebarOrientationLeft, .sidebarOrientationRight").addClass("sidebarCollapsed"),this._scroll(),$.browser.msie&&0===$.browser.version.indexOf("9")&&$(window).trigger("resize")}}),WCF.User={userID:0,username:"",init:function(t,e){this.userID=t,this.username=e}},WCF.Effect={},WCF.Effect.Scroll=Class.extend({scrollTo:function(t,e,i){if(!t.length)return!0;
var n=t.getOffsets("offset").top,a=$(document).height(),s=$(window).height();return n>a-s&&(n=a-s,0>n&&(n=0)),i===!0?$("html,body").scrollTop(n):$("html,body").animate({scrollTop:n},400,function(t,e,i,n,a){return-n*((e=e/a-1)*e*e*e-1)+i}),!1}}),WCF.Effect.SmoothScroll=WCF.Effect.Scroll.extend({init:function(){var t=this;$(document).on("click","a[href$=#top],a[href$=#bottom]",function(){var e=$(this.hash);return t.scrollTo(e,!0),!1})}}),WCF.Effect.BalloonTooltip=Class.extend({_didInit:!1,_tooltip:null,_viewportDimensions:{},init:function(){jQuery.browser.mobile||(this._didInit||(this._tooltip=$('<div id="balloonTooltip" class="balloonTooltip"><span id="balloonTooltipText"></span><span class="pointer"><span></span></span></div>').appendTo($("body")).hide(),this._updateViewportDimensions(),$(window).resize($.proxy(this._updateViewportDimensions,this)),WCF.DOMNodeInsertedHandler.addCallback("WCF.Effect.BalloonTooltip",$.proxy(this.init,this)),this._didInit=!0),$(".jsTooltip").each($.proxy(this._initTooltip,this)))},_updateViewportDimensions:function(){this._viewportDimensions=$(document).getDimensions()},_initTooltip:function(t,e){var i=$(e);if(i.hasClass("jsTooltip")){i.removeClass("jsTooltip");var n=i.attr("title");""!==n&&(i.data("tooltip",n),i.removeAttr("title"),i.hover($.proxy(this._mouseEnterHandler,this),$.proxy(this._mouseLeaveHandler,this)),i.click($.proxy(this._mouseLeaveHandler,this)))}},_mouseEnterHandler:function(t){var e=$(t.currentTarget),i=e.attr("title");if(i&&""!==i&&(e.data("tooltip",i),e.removeAttr("title")),this._tooltip.css({top:"0px",left:"0px"}),!e.data("tooltip"))return this._tooltip.hide(),void 0;this._tooltip.children("span:eq(0)").text(e.data("tooltip"));var n=this._tooltip.find(".pointer");this._tooltip.show();var a=n.outerWidth();this._tooltip.hide();var s=e.getOffsets("offset"),o=e.getDimensions("outer"),r=this._tooltip.getDimensions("outer"),l=this._tooltip.getDimensions("inner"),c=s.left+Math.ceil(o.width/2),h=Math.ceil(r.width/2),d="center";if(5>c-h?d="left":this._viewportDimensions.width-5<c+h&&(d="right"),s.top+o.height+r.height-$(document).scrollTop()<$(window).height()){var u=s.top+o.height+7;this._tooltip.removeClass("inverse"),n.css("top",-5)}else{var u=s.top-r.height-7;this._tooltip.addClass("inverse"),n.css("top",r.height)}switch(d){case"center":var p=Math.round(s.left-h+o.width/2);n.css({left:l.width/2-a/2+"px"});break;case"left":var p=s.left;n.css({left:"5px"});break;case"right":var p=s.left+o.width-r.width;n.css({left:l.width-a-5+"px"})}this._tooltip.css({top:u+"px",left:p+"px"}),this._tooltip.wcfFadeIn()},_mouseLeaveHandler:function(){this._tooltip.stop().hide().css({opacity:1})}}),WCF.CloseOverlayHandler={_callbacks:new WCF.Dictionary,_isListening:!1,addCallback:function(t,e){return this._bindListener(),this._callbacks.isset(t)?(console.debug("[WCF.CloseOverlayHandler] identifier '"+t+"' is already bound to a callback"),!1):(this._callbacks.add(t,e),void 0)},removeCallback:function(t){this._callbacks.isset(t)&&this._callbacks.remove(t)},_bindListener:function(){this._isListening||($("body").click($.proxy(this._executeCallbacks,this)),this._isListening=!0)},_executeCallbacks:function(){this._callbacks.each(function(t){t.value()})}},WCF.DOMNodeInsertedHandler={_callbacks:[],_isExecuting:!1,addCallback:function(t,e){this._callbacks.push(e)},_executeCallbacks:function(){if(!this._isExecuting){this._isExecuting=!0;for(var t=0,e=this._callbacks.length;e>t;t++)this._callbacks[t]();this._isExecuting=!1}},execute:function(){this._executeCallbacks()}},WCF.DOMNodeRemovedHandler={_callbacks:new WCF.Dictionary,_isExecuting:!1,_isListening:!1,addCallback:function(t,e){return this._bindListener(),this._callbacks.isset(t)?(console.debug("[WCF.DOMNodeRemovedHandler] identifier '"+t+"' is already bound to a callback"),!1):(this._callbacks.add(t,e),void 0)},removeCallback:function(t){this._callbacks.isset(t)&&this._callbacks.remove(t)},_bindListener:function(){this._isListening||($(document).bind("DOMNodeRemoved",$.proxy(this._executeCallbacks,this)),this._isListening=!0)},_executeCallbacks:function(t){this._isExecuting||(this._isExecuting=!0,this._callbacks.each(function(e){e.value(t)}),this._isExecuting=!1)}},WCF.PageVisibilityHandler={_callbacks:new WCF.Dictionary,_isListening:!1,_hiddenFieldName:"",addCallback:function(t,e){return this._bindListener(),this._callbacks.isset(t)?(console.debug("[WCF.PageVisibilityHandler] identifier '"+t+"' is already bound to a callback"),!1):(this._callbacks.add(t,e),void 0)},removeCallback:function(t){this._callbacks.isset(t)&&this._callbacks.remove(t)},_bindListener:function(){if(!this._isListening){var t=null;"undefined"!=typeof document.hidden?(this._hiddenFieldName="hidden",t="visibilitychange"):"undefined"!=typeof document.mozHidden?(this._hiddenFieldName="mozHidden",t="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(this._hiddenFieldName="msHidden",t="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(this._hiddenFieldName="webkitHidden",t="webkitvisibilitychange"),null===t?console.debug("[WCF.PageVisibilityHandler] This browser does not support the page visibility API."):$(document).on(t,$.proxy(this._executeCallbacks,this)),this._isListening=!0}},_executeCallbacks:function(){if(!this._isExecuting){this._isExecuting=!0;var t=document[this._hiddenFieldName];this._callbacks.each(function(e){e.value(t)}),this._isExecuting=!1}}},WCF.Table={},WCF.Table.EmptyTableHandler=Class.extend({_options:{},_rowClassName:"",init:function(t,e,i){this._rowClassName=e,this._tableContainer=t,this._options=$.extend(!0,{emptyMessage:null,messageType:"info",refreshPage:!1,updatePageNumber:!1},i||{}),WCF.DOMNodeRemovedHandler.addCallback("WCF.Table.EmptyTableHandler."+e,$.proxy(this._remove,this))},_remove:function(t){var e=$(t.target);if(e.hasClass(this._rowClassName)){var i=e.parents("tbody:eq(0)");if(1==i.children("tr").length)if(this._options.emptyMessage)this._tableContainer.replaceWith($("<p />").addClass(this._options.messageType).text(this._options.emptyMessage));else if(this._options.refreshPage)if(this._options.updatePageNumber){var n=window.location.href.match(/(\?|&)pageNo=(\d+)/g);if(n){var a=n[n.length-1].match(/\d+/g);this._options.updatePageNumber>0?a++:a--,window.location=window.location.href.replace(n[n.length-1],n[n.length-1][0]+"pageNo="+a)}}else window.location.reload();else this._tableContainer.remove()}}}),WCF.Search={},WCF.Search.Base=Class.extend({_callback:null,_className:"",_commaSeperated:!1,_delay:0,_excludedSearchValues:[],_itemCount:0,_itemIndex:-1,_list:null,_oldSearchString:[],_proxy:null,_searchInput:null,_triggerLength:3,_timer:null,init:function(t,e,i,n,a){return null===e||void 0===e||$.isFunction(e)?(this._callback=e?e:null,this._delay=0,this._excludedSearchValues=[],i&&(this._excludedSearchValues=i),this._searchInput=$(t),this._searchInput.length?(this._searchInput.keydown($.proxy(this._keyDown,this)).keyup($.proxy(this._keyUp,this)).wrap('<span class="dropdown" />'),$.browser.mozilla&&$.browser.touch&&this._searchInput.on("input",$.proxy(this._keyUp,this)),this._list=$('<ul class="dropdownMenu" />').insertAfter(this._searchInput),this._commaSeperated=n?!0:!1,this._oldSearchString=[],this._itemCount=0,this._itemIndex=-1,this._proxy=new WCF.Action.Proxy({showLoadingOverlay:a!==!0?!1:!0,success:$.proxy(this._success,this),autoAbortPrevious:!0}),this._searchInput.is("input")&&this._searchInput.attr("autocomplete","off"),this._searchInput.blur($.proxy(this._blur,this)),WCF.Dropdown.initDropdownFragment(this._searchInput.parent(),this._list),void 0):(console.debug("[WCF.Search.Base] Selector '"+t+"' for search input is invalid, aborting."),void 0)):(console.debug("[WCF.Search.Base] The given callback is invalid, aborting."),void 0)},_blur:function(){var t=this;new WCF.PeriodicalExecuter(function(e){t._list.is(":visible")&&t._clearList(!1),e.stop()},250)},_keyDown:function(t){if(t.which===$.ui.keyCode.ENTER){var e=this._searchInput.parents(".dropdown");e.data("disableAutoFocus")?-1!==this._itemIndex&&t.preventDefault():(e.data("preventSubmit")||-1!==this._itemIndex)&&t.preventDefault()}},_keyUp:function(t){switch(t.which){case 37:case 39:return;case 38:return this._selectPreviousItem(),void 0;case 40:return this._selectNextItem(),void 0;case 13:return this._selectElement(t)}var e=this._getSearchString(t);if(""===e)this._clearList(!0);else if(e.length>=this._triggerLength){var i={data:{excludedSearchValues:this._excludedSearchValues,searchString:e}};if(this._delay){null!==this._timer&&this._timer.stop();var n=this;this._timer=new WCF.PeriodicalExecuter(function(){n._queryServer(i),n._timer.stop(),n._timer=null},this._delay)}else this._queryServer(i)}else this._clearList(!1)},_queryServer:function(t){this._searchInput.parents(".searchBar").addClass("loading"),this._proxy.setOption("data",{actionName:"getSearchResultList",className:this._className,interfaceName:"wcf\\data\\ISearchAction",parameters:this._getParameters(t)}),this._proxy.sendRequest()},setDelay:function(t){this._delay=t},_selectNextItem:function(){0!==this._itemCount&&(this._itemIndex++,this._itemIndex===this._itemCount&&(this._itemIndex=0),this._highlightSelectedElement())},_selectPreviousItem:function(){0!==this._itemCount&&(this._itemIndex--,-1===this._itemIndex&&(this._itemIndex=this._itemCount-1),this._highlightSelectedElement())},_highlightSelectedElement:function(){this._list.find("li").removeClass("dropdownNavigationItem"),this._list.find("li:eq("+this._itemIndex+")").addClass("dropdownNavigationItem")},_selectElement:function(){return 0===this._itemCount?!0:(this._list.find("li.dropdownNavigationItem").trigger("click"),!1)},_getSearchString:function(t){var e=$.trim(this._searchInput.val());if(this._commaSeperated){var i=t.keyCode||t.which;if(i==$.ui.keyCode.COMMA)return"";for(var n=e.split(","),a=n.length,s=0;a>s;s++)n[s]=$.trim(n[s]);for(var s=0;a>s;s++){var o=n[s];if(!this._oldSearchString[s]){e=o;break}if(o!=this._oldSearchString[s]){e=o;break}}this._oldSearchString=n}return e},_getParameters:function(t){return t},_success:function(t){if(this._clearList(!1),this._searchInput.parents(".searchBar").removeClass("loading"),$.getLength(t.returnValues))for(var e in t.returnValues){var i=t.returnValues[e];this._createListItem(i)}else if(!this._handleEmptyResult())return;WCF.CloseOverlayHandler.addCallback("WCF.Search.Base",$.proxy(function(){this._clearList()},this));var n=this._searchInput.parents(".dropdown").wcfIdentify();WCF.Dropdown.getDropdownMenu(n).hasClass("dropdownOpen")||WCF.Dropdown.toggleDropdown(n),this._itemIndex=-1,WCF.Dropdown.getDropdown(n).data("disableAutoFocus")||this._selectNextItem()},_handleEmptyResult:function(){return!1},_createListItem:function(t){var e=$("<li><span>"+WCF.String.escapeHTML(t.label)+"</span></li>").appendTo(this._list);return e.data("objectID",t.objectID).data("label",t.label).click($.proxy(this._executeCallback,this)),this._itemCount++,e},_executeCallback:function(t){var e=!1,i=$(t.currentTarget);if(this._commaSeperated)for(var n=i.data("label"),a=0,s=this._oldSearchString.length;s>a;a++){var o=this._oldSearchString[a];if(0===n.toLowerCase().indexOf(o.toLowerCase())){this._oldSearchString[a]=n,this._searchInput.val(this._oldSearchString.join(", ")),$.browser.webkit&&this._searchInput.css({display:"block"});var r=this._searchInput.val().toLowerCase().indexOf(n.toLowerCase())+n.length;this._searchInput.focus().setCaret(r);break}}else null===this._callback?this._searchInput.val(i.data("label")):e=this._callback(i.data())===!0?!0:!1;this._clearList(e)},_clearList:function(t){t&&!this._commaSeperated&&this._searchInput.val(""),WCF.Dropdown.getDropdown(this._searchInput.parents(".dropdown").wcfIdentify()).removeClass("dropdownOpen"),WCF.Dropdown.getDropdownMenu(this._searchInput.parents(".dropdown").wcfIdentify()).removeClass("dropdownOpen"),this._list.end().empty(),WCF.CloseOverlayHandler.removeCallback("WCF.Search.Base"),this._itemCount=0,this._itemIndex=-1},addExcludedSearchValue:function(t){WCF.inArray(t,this._excludedSearchValues)||this._excludedSearchValues.push(t)},removeExcludedSearchValue:function(t){var e=$.inArray(t,this._excludedSearchValues);-1!=e&&this._excludedSearchValues.splice(e,1)}}),WCF.Search.User=WCF.Search.Base.extend({_className:"wcf\\data\\user\\UserAction",_includeUserGroups:!1,init:function(t,e,i,n,a){this._includeUserGroups=i,this._super(t,e,n,a)},_getParameters:function(t){return t.data.includeUserGroups=this._includeUserGroups?1:0,t},_createListItem:function(t){var e=this._super(t),i=null;if(t.icon?i=$(t.icon):this._includeUserGroups&&"group"===t.type&&(i=$('<span class="icon icon16 icon-group" />')),i){var n=e.find("span").detach(),a=$("<div />").addClass("box16").appendTo(e);a.append(i),a.append($("<div />").append(n))}return e.data("type",t.type),e}}),WCF.System={},WCF.System.Dependency={},WCF.System.Dependency.Manager={_callbacks:{},_loaded:[],_setupCallbacks:{},register:function(t,e){return $.isFunction(e)?(WCF.inArray(t,this._loaded)?setTimeout(function(){e()},1):(this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e)),void 0):(console.debug("[WCF.System.Dependency.Manager] Callback for identifier '"+t+"' is invalid, aborting."),void 0)},setup:function(t,e){return $.isFunction(e)?(this._setupCallbacks[t]||(this._setupCallbacks[t]=[]),this._setupCallbacks[t].push(e),void 0):(console.debug("[WCF.System.Dependency.Manager] Setup callback for identifier '"+t+"' is invalid, aborting."),void 0)},invoke:function(t){if(this._setupCallbacks[t]){for(var e=0,i=this._setupCallbacks[t].length;i>e;e++)this._setupCallbacks[t][e]();delete this._setupCallbacks[t]}if(this._loaded.push(t),this._callbacks[t]){for(var e=0,i=this._callbacks[t].length;i>e;e++)this._callbacks[t][e]();delete this._callbacks[t]}}},WCF.System.FlexibleMenu={_containers:{},_containerIDs:[],_dropdowns:{},_dropdownMenus:{},_hasHiddenItems:{},_isWorking:!1,_menuItems:{},init:function(){this.registerMenu("mainMenu"),this.registerMenu($(".navigationHeader:eq(0)").wcfIdentify()),this._registerTabMenus(),$(window).resize($.proxy(this.rebuildAll,this)),WCF.DOMNodeInsertedHandler.addCallback("WCF.System.FlexibleMenu",$.proxy(this._registerTabMenus,this))},_registerTabMenus:function(){$(".tabMenuContainer:not(.jsFlexibleMenuEnabled)").each(function(t,e){var i=$(e).children("nav");i.length&&i.find("> ul:eq(0) > li").length&&WCF.System.FlexibleMenu.registerMenu(i.wcfIdentify())})},registerMenu:function(t){var e=$("#"+t);return e.length?(this._containerIDs.push(t),this._containers[t]=e,this._menuItems[t]=e.find("> ul:eq(0) > li"),this._dropdowns[t]=$('<li class="dropdown"><a class="icon icon16 icon-list" /></li>').data("containerID",t).click($.proxy(this._click,this)),this._dropdownMenus[t]=$('<ul class="dropdownMenu" />').appendTo(this._dropdowns[t]),this._hasHiddenItems[t]=!1,this.rebuild(t),WCF.Dropdown.initDropdown(this._dropdowns[t].children("a")),void 0):(console.debug("[WCF.System.FlexibleMenu] Unable to find container identified by '"+t+"', aborting."),void 0)},rebuildAll:function(){if(!this._isWorking){this._isWorking=!0;for(var t=0,e=this._containerIDs.length;e>t;t++)this.rebuild(this._containerIDs[t]);this._isWorking=!1}},rebuild:function(t){if(!this._containers[t])return console.debug("[WCF.System.FlexibleMenu] Cannot rebuild unknown container identified by '"+t+"'"),void 0;for(var e=!1,i=this._containers[t],n=0,a=this._menuItems[t].filter(":visible"),s=0,o=a.length;o>s;s++)n+=$(a[s]).outerWidth(!0);this._hasHiddenItems[t]||this._dropdowns[t].appendTo(i.children("ul:eq(0)"));var r=this._dropdowns[t].outerWidth(!0);this._hasHiddenItems[t]||this._dropdowns[t].detach();var l=i.parent().innerWidth();if(l-=parseInt(i.parent().css("padding-left").replace(/px$/,""))+parseInt(i.parent().css("padding-right").replace(/px$/,"")),l-=parseInt(i.css("margin-left").replace(/px$/,""))+parseInt(i.css("margin-right").replace(/px$/,"")),l-=parseInt(i.css("padding-left").replace(/px$/,""))+parseInt(i.css("padding-right").replace(/px$/,"")),l-=parseInt(i.children("ul:eq(0)").css("padding-left").replace(/px$/,""))+parseInt(i.children("ul:eq(0)").css("padding-right").replace(/px$/,"")),n>l||this._hasHiddenItems[t]&&n>l-r){var a=a.filter(":not(.active):not(.ui-state-active):visible");l-=r;for(var s=a.length-1;s>=0&&n>l;s--){var c=$(a[s]);n-=c.outerWidth(!0),c.hide(),e=!0,this._hasHiddenItems[t]=!0}this._hasHiddenItems[t]&&this._dropdowns[t].appendTo(i.children("ul:eq(0)"))}else if(this._hasHiddenItems[t]&&l>n){var h=this._menuItems[t].filter(":not(:visible)");l-=r;for(var s=0,o=h.length;o>s;s++){var c=$(h[s]);if(n+=c.outerWidth(),s+1==o&&(l+=r),!(l>n))break;c.css("display",""),e=!0}e&&(this._hasHiddenItems[t]=this._menuItems[t].filter(":not(:visible)").length>0,this._hasHiddenItems[t]||this._dropdowns[t].detach())}e&&(this._dropdownMenus[t].empty(),this._menuItems[t].filter(":not(:visible)").each($.proxy(function(e,i){$("<li>"+$(i).html()+"</li>").appendTo(this._dropdownMenus[t])},this)))}},WCF.System.Mobile={},WCF.System.Mobile.UX={_enabled:!1,_main:null,_sidebar:null,init:function(){this._enabled=!1,this._main=$("#main"),this._sidebar=this._main.find("> div > div > .sidebar"),$.browser.touch&&$("html").addClass("touch"),enquire.register("screen and (max-width: 800px)",{match:$.proxy(this._enable,this),unmatch:$.proxy(this._disable,this),setup:$.proxy(this._setup,this),deferSetup:!0}),$.browser.msie&&this._sidebar.width()>305&&this._sidebar.css("display","none").css("display","")},_setup:function(){this._initSidebarToggleButtons(),this._initSearchBar(),this._initButtonGroupNavigation(),WCF.CloseOverlayHandler.addCallback("WCF.System.Mobile.UX",$.proxy(this._closeMenus,this)),WCF.DOMNodeInsertedHandler.addCallback("WCF.System.Mobile.UX",$.proxy(this._initButtonGroupNavigation,this))},_enable:function(){this._enabled=!0,$.browser.msie&&this._sidebar.css("display","none").css("display","")},_disable:function(){this._enabled=!1,$.browser.msie&&this._sidebar.css("display","none").css("display","")},_initSidebarToggleButtons:function(){var t=this._main.hasClass("sidebarOrientationLeft"),e=this._main.hasClass("sidebarOrientationRight");if(t||e){var i="wcf.global.sidebar.show"+(t?"Left":"Right")+"Sidebar";(i===WCF.Language.get(i)||""===WCF.Language.get(i))&&(i='<span class="icon icon16 icon-double-angle-'+(t?"left":"right")+'" />');var n="wcf.global.sidebar.hide"+(t?"Left":"Right")+"Sidebar";(n===WCF.Language.get(n)||""===WCF.Language.get(n))&&(n='<span class="icon icon16 icon-double-angle-'+(t?"right":"left")+'" />');var a=this;$('<span class="button small mobileSidebarToggleButton">'+i+"</span>").appendTo($(".content")).click(function(){a._main.addClass("mobileShowSidebar")}),$('<span class="button small mobileSidebarToggleButton">'+n+"</span>").appendTo($(".sidebar")).click(function(){a._main.removeClass("mobileShowSidebar")})}},_initSearchBar:function(){var t=$(".searchBar:eq(0)"),e=this;t.click(function(){e._enabled&&t.addClass("searchBarOpen")}),this._main.click(function(){t.removeClass("searchBarOpen")})},_initButtonGroupNavigation:function(){$(".buttonGroupNavigation:not(.jsMobileButtonGroupNavigation)").each(function(t,e){var i=$(e).addClass("jsMobileButtonGroupNavigation"),n=$('<a class="dropdownLabel"><span class="icon icon24 icon-list" /></a>').prependTo(i);n.click(function(){return n.next().toggleClass("open"),!1})})},_closeMenus:function(){$(".jsMobileButtonGroupNavigation > ul.open").removeClass("open")}},WCF.System.Notification=Class.extend({_callback:null,_cssClassNames:"",_message:"",_overlay:null,init:function(t,e){this._cssClassNames=e||"success",this._message=t||WCF.Language.get("wcf.global.success"),this._overlay=$("#systemNotification"),this._overlay.length||(this._overlay=$('<div id="systemNotification"><p></p></div>').hide().appendTo(document.body))},show:function(t,e,i,n){e=parseInt(e),e||(e=2e3),t&&$.isFunction(t)&&(this._callback=t),this._overlay.children("p").html(i||this._message),this._overlay.children("p").removeClass().addClass(n||this._cssClassNames),new WCF.PeriodicalExecuter($.proxy(this._hide,this),e),this._overlay.wcfFadeIn(void 0,300)},_hide:function(t){null!==this._callback&&this._callback(),this._overlay.wcfFadeOut(void 0,300),t.stop()}}),WCF.System.Confirmation={_callback:null,_dialog:null,_parameters:null,_visible:!1,_confirmationButton:null,show:function(t,e,i,n){if(this._visible)return console.debug("[WCF.System.Confirmation] Confirmation dialog is already open, refusing action."),void 0;if(!$.isFunction(e))return console.debug("[WCF.System.Confirmation] Given callback is invalid, aborting."),void 0;this._callback=e,this._parameters=i;var a=!0;null===this._dialog&&(this._createDialog(),a=!1),this._dialog.find("#wcfSystemConfirmationContent").empty().hide(),n&&n.length&&n.appendTo(this._dialog.find("#wcfSystemConfirmationContent").show()),this._dialog.find("p").text(t),this._dialog.wcfDialog({onClose:$.proxy(this._close,this),onShow:$.proxy(this._show,this),title:WCF.Language.get("wcf.global.confirmation.title")}),a&&this._dialog.wcfDialog("render"),this._confirmationButton.focus(),this._visible=!0},_createDialog:function(){this._dialog=$('<div id="wcfSystemConfirmation" class="systemConfirmation"><p /><div id="wcfSystemConfirmationContent" /></div>').hide().appendTo(document.body);var t=$('<div class="formSubmit" />').appendTo(this._dialog);this._confirmationButton=$('<button class="buttonPrimary">'+WCF.Language.get("wcf.global.confirmation.confirm")+"</button>").data("action","confirm").click($.proxy(this._click,this)).appendTo(t),$("<button>"+WCF.Language.get("wcf.global.confirmation.cancel")+"</button>").data("action","cancel").click($.proxy(this._click,this)).appendTo(t)},_click:function(t){this._notify($(t.currentTarget).data("action"))},_close:function(){this._visible&&this._notify("cancel")},_notify:function(t){this._visible=!1,this._dialog.wcfDialog("close"),this._callback(t,this._parameters)},_show:function(){this._dialog.find("button.buttonPrimary").blur().focus()}},WCF.System.DisableScrolling={_depth:0,_oldOverflow:null,disable:function(){$.browser.touch||(0===this._depth&&(this._oldOverflow=$(document.body).css("overflow"),$(document.body).css("overflow","hidden")),this._depth++)},enable:function(){0!==this._depth&&(this._depth--,0===this._depth&&$(document.body).css("overflow",this._oldOverflow))}},WCF.System.PageNavigation={_button:null,_description:null,_dialog:null,_elementID:"",_elements:{},_pageNo:null,init:function(t,e){var i=$(t);if(i.length)return e=e||null,null===e||$.isFunction(e)?(this._initElements(i,e),void 0):(console.debug("[WCF.System.PageNavigation] Callback for selector '"+t+"' is invalid, aborting."),void 0)},_initElements:function(t,e){var i=this;t.each(function(t,e){var n=$(e),a=n.wcfIdentify();void 0===i._elements[a]&&(i._elements[a]=n,n.find("li.jumpTo").data("elementID",a).click($.proxy(i._click,i)))}).data("callback",e)},_click:function(t){if(this._elementID=$(t.currentTarget).data("elementID"),null===this._dialog){this._dialog=$('<div id="pageNavigationOverlay" />').hide().appendTo(document.body);var e=$("<fieldset><legend>"+WCF.Language.get("wcf.global.page.jumpTo")+"</legend></fieldset>").appendTo(this._dialog);$('<dl><dt><label for="jsPageNavigationPageNo">'+WCF.Language.get("wcf.global.page.jumpTo")+"</label></dt><dd></dd></dl>").appendTo(e),this._pageNo=$('<input type="number" id="jsPageNavigationPageNo" value="1" min="1" max="1" class="tiny" />').keyup($.proxy(this._keyUp,this)).appendTo(e.find("dd")),this._description=$("<small></small>").insertAfter(this._pageNo);var i=$('<div class="formSubmit" />').appendTo(this._dialog);this._button=$('<button class="buttonPrimary">'+WCF.Language.get("wcf.global.button.submit")+"</button>").click($.proxy(this._submit,this)).appendTo(i)}this._button.enable(),this._description.html(WCF.Language.get("wcf.global.page.jumpTo.description").replace(/#pages#/,this._elements[this._elementID].data("pages"))),this._pageNo.val(this._elements[this._elementID].data("pages")).attr("max",this._elements[this._elementID].data("pages")),this._dialog.wcfDialog({title:WCF.Language.get("wcf.global.page.pageNavigation")})},_keyUp:function(){var t=parseInt(this._pageNo.val())||0;1>t||t>this._pageNo.attr("max")?this._button.disable():this._button.enable()},_submit:function(){var t=this._elements[this._elementID];if(null===t.data("callback")){var e=t.data("link").replace(/pageNo=%d/,"pageNo="+this._pageNo.val());window.location=e}else t.data("callback")(this._pageNo.val()),this._dialog.wcfDialog("close")}},WCF.System.KeepAlive=Class.extend({init:function(t){new WCF.PeriodicalExecuter(function(t){new WCF.Action.Proxy({autoSend:!0,data:{actionName:"keepAlive",className:"wcf\\data\\session\\SessionAction"},failure:function(){t.stop()},showLoadingOverlay:!1,suppressErrors:!0})},1e3*t)}}),WCF.InlineEditor=Class.extend({_callbacks:[],_dropdowns:{},_elements:{},_notification:null,_options:[],_proxy:null,_updateData:[],init:function(t){var e=$(t);if(e.length){this._setOptions();for(var i="",n=0,a=this._options.length;a>n;n++)if(this._options[n].isQuickOption){i=this._options[n].optionName;break}var s=this;e.each(function(t,e){var n=$(e),a=n.wcfIdentify(),o=s._getTriggerElement(n);null!==o&&1===o.length&&(o.click($.proxy(s._show,s)).data("elementID",a),i&&o.disableSelection().data("optionName",i).dblclick($.proxy(s._click,s)),s._elements[a]=n)}),this._proxy=new WCF.Action.Proxy({success:$.proxy(this._success,this)}),WCF.CloseOverlayHandler.addCallback("WCF.InlineEditor",$.proxy(this._closeAll,this)),this._notification=new WCF.System.Notification(WCF.Language.get("wcf.global.success"),"success")}},_closeAll:function(){for(var t in this._elements)this._hide(t)},_setOptions:function(){this._options=[]},registerCallback:function(t){$.isFunction(t)&&this._callbacks.push(t)},_getTriggerElement:function(){return null},_show:function(t){var e=$(t.currentTarget).data("elementID"),i=null;this._dropdowns[e]||(i=this._getTriggerElement(this._elements[e]).addClass("dropdownToggle").wrap('<span class="dropdown" />'),this._dropdowns[e]=$('<ul class="dropdownMenu" />').insertAfter(i)),this._dropdowns[e].empty();for(var n=!1,a="",s=0,o=this._options.length;o>s;s++){var r=this._options[s];if("divider"===r.optionName)""!==a&&"divider"!==a&&($('<li class="dropdownDivider" />').appendTo(this._dropdowns[e]),a=r.optionName);else if(this._validate(e,r.optionName)||this._validateCallbacks(e,r.optionName)){var l=$("<li><span>"+r.label+"</span></li>").appendTo(this._dropdowns[e]);l.data("elementID",e).data("optionName",r.optionName).data("isQuickOption",r.isQuickOption?!0:!1).click($.proxy(this._click,this)),n=!0,a=r.optionName}}if(n){var c=this._dropdowns[e].children().last();c.hasClass("dropdownDivider")&&c.remove();var h=null,d=0;if(this._dropdowns[e].children().each(function(t,e){var i=$(e);i.hasClass("dropdownDivider")||(i.data("isQuickOption")?h=i:d++)}),!d)return h.trigger("click"),null!==i&&WCF.Dropdown.close(i.parents(".dropdown").wcfIdentify()),!1}return null!==i&&WCF.Dropdown.initDropdown(i,!0),!1},_validate:function(){return!1},_validateCallbacks:function(t,e){var i=this._callbacks.length;if(i)for(var n=0;i>n;n++)if(this._callbacks[n].validate(this._elements[t],e))return!0;return!1},_success:function(t){var e=this._updateData.length;e&&(this._updateState(t),this._updateData=[])},_updateState:function(){},_click:function(t){var e=$(t.currentTarget),i=e.data("elementID"),n=e.data("optionName");this._execute(i,n)||this._executeCallback(i,n),this._hide(i)},_execute:function(){return!1},_executeCallback:function(t,e){var i=this._callbacks.length;if(i)for(var n=0;i>n;n++)if(this._callbacks[n].execute(this._elements[t],e))return!0;return!1},_hide:function(t){this._dropdowns[t]&&this._dropdowns[t].empty().removeClass("dropdownOpen")}}),WCF.Upload=Class.extend({_name:"__files[]",_buttonSelector:null,_fileListSelector:null,_fileUpload:null,_className:"",_iframe:null,_internalFileID:0,_options:{},_uploadMatrix:[],_supportsAJAXUpload:!0,_overlay:null,init:function(t,e,i,n){this._buttonSelector=t,this._fileListSelector=e,this._className=i,this._internalFileID=0,this._options=$.extend(!0,{action:"upload",multiple:!1,url:"index.php/AJAXUpload/?t="+SECURITY_TOKEN+SID_ARG_2ND},n||{});var a=new XMLHttpRequest;this._supportsAJAXUpload=a&&"upload"in a&&"onprogress"in a.upload,this._createButton()},_createButton:function(){if(this._supportsAJAXUpload){this._fileUpload=$('<input type="file" name="'+this._name+'" '+(this._options.multiple?'multiple="true" ':"")+"/>"),this._fileUpload.change($.proxy(this._upload,this));var t=$('<p class="button uploadButton"><span>'+WCF.Language.get("wcf.global.button.upload")+"</span></p>");t.prepend(this._fileUpload)}else{var t=$('<p class="button uploadFallbackButton"><span>'+WCF.Language.get("wcf.global.button.upload")+"</span></p>");t.click($.proxy(this._showOverlay,this))}this._insertButton(t)},_insertButton:function(t){this._buttonSelector.append(t)},_removeButton:function(){var t=".uploadButton";this._supportsAJAXUpload||(t=".uploadFallbackButton"),this._buttonSelector.find(t).remove()},_upload:function(){var t=this._fileUpload.prop("files");if(t.length){var e=new FormData,i=this._createUploadMatrix(t);if(!this._uploadMatrix[i].length)return;for(var n=0,a=t.length;a>n;n++)if(this._uploadMatrix[i][n]){var s=this._uploadMatrix[i][n].data("internalFileID");e.append("__files["+s+"]",t[n])}e.append("actionName",this._options.action),e.append("className",this._className);var o=this._getParameters();for(var r in o)e.append("parameters["+r+"]",o[r]);var l=this;$.ajax({type:"POST",url:this._options.url,enctype:"multipart/form-data",data:e,contentType:!1,processData:!1,success:function(t){l._success(i,t)},error:$.proxy(this._error,this),xhr:function(){var t=$.ajaxSettings.xhr();return t&&t.upload.addEventListener("progress",function(t){l._progress(i,t)},!1),t}})}},_createUploadMatrix:function(t){if(t.length){var e=this._uploadMatrix.length;this._uploadMatrix[e]=[];for(var i=0,n=t.length;n>i;i++){var a=t[i],s=this._initFile(a);s.hasClass("uploadFailed")||(s.data("filename",a.name).data("internalFileID",this._internalFileID++),this._uploadMatrix[e][i]=s)}return e}return null},_success:function(){},_error:function(){},_progress:function(t,e){var i=Math.round(100*e.loaded/e.total);for(var n in this._uploadMatrix[t])this._uploadMatrix[t][n].find("progress").attr("value",i)},_getParameters:function(){return{}},_initFile:function(t){return $("<li>"+t.name+" ("+t.size+')<progress max="100" /></li>').appendTo(this._fileListSelector)},_showOverlay:function(){if(null===this._iframe&&(this._iframe=$('<iframe name="__fileUploadIFrame" />').hide().appendTo(document.body)),!this._overlay){this._overlay=$('<div><form enctype="multipart/form-data" method="post" action="'+this._options.url+'" target="__fileUploadIFrame" /></div>').hide().appendTo(document.body);var t=this._overlay.find("form");$('<dl class="wide"><dd><input type="file" id="__fileUpload" name="'+this._name+'" '+(this._options.multiple?'multiple="true" ':"")+"/></dd></dl>").appendTo(t),$('<div class="formSubmit"><input type="submit" value="Upload" accesskey="s" /></div></form>').appendTo(t),$('<input type="hidden" name="isFallback" value="1" />').appendTo(t),$('<input type="hidden" name="actionName" value="'+this._options.action+'" />').appendTo(t),$('<input type="hidden" name="className" value="'+this._className+'" />').appendTo(t);var e=this._getParameters();for(var i in e)$('<input type="hidden" name="'+i+'" value="'+e[i]+'" />').appendTo(t);t.submit($.proxy(function(){var t={name:this._getFilename(),size:""},e=this._createUploadMatrix([t]),i=this;this._iframe.data("loading",!0).off("load").load(function(){i._evaluateResponse(e)}),this._overlay.wcfDialog("close")},this))}this._overlay.wcfDialog({title:WCF.Language.get("wcf.global.button.upload")})},_evaluateResponse:function(t){var e=$.parseJSON(this._iframe.contents().find("pre").html());this._success(t,e)},_getFilename:function(){return $("#__fileUpload").val().split("\\").pop()
}}),WCF.Upload.Parallel=WCF.Upload.extend({init:function(t,e,i,n){n=$.extend(!0,n||{},{multiple:!0}),this._super(t,e,i,n)},_upload:function(){for(var t=this._fileUpload.prop("files"),e=0,i=t.length;i>e;e++){var n=t[e],a=new FormData,s=this._createUploadMatrix(n);if(this._uploadMatrix[s].length){a.append("__files["+s+"]",n),a.append("actionName",this._options.action),a.append("className",this._className);var o=this._getParameters();for(var r in o)a.append("parameters["+r+"]",o[r]);this._sendRequest(s,a)}}},_sendRequest:function(t,e){var i=this;$.ajax({type:"POST",url:this._options.url,enctype:"multipart/form-data",data:e,contentType:!1,processData:!1,success:function(e){i._success(t,e)},error:$.proxy(this._error,this),xhr:function(){var e=$.ajaxSettings.xhr();return e&&e.upload.addEventListener("progress",function(e){i._progress(t,e)},!1),e}})},_createUploadMatrix:function(t){var e=this._initFile(t);return e.hasClass("uploadFailed")?null:(e.data("filename",t.name).data("internalFileID",this._internalFileID),this._uploadMatrix[this._internalFileID++]=e,this._internalFileID-1)},_success:function(){},_progress:function(t,e){var i=Math.round(100*e.loaded/e.total);this._uploadMatrix[t].find("progress").attr("value",i)},_showOverlay:function(){if(null===this._iframe&&(this._iframe=$('<iframe name="__fileUploadIFrame" />').hide().appendTo(document.body)),!this._overlay){this._overlay=$('<div><form enctype="multipart/form-data" method="post" action="'+this._options.url+'" target="__fileUploadIFrame" /></div>').hide().appendTo(document.body);var t=this._overlay.find("form");$('<dl class="wide"><dd><input type="file" id="__fileUpload" name="'+this._name+'" '+(this._options.multiple?'multiple="true" ':"")+"/></dd></dl>").appendTo(t),$('<div class="formSubmit"><input type="submit" value="Upload" accesskey="s" /></div></form>').appendTo(t),$('<input type="hidden" name="isFallback" value="1" />').appendTo(t),$('<input type="hidden" name="actionName" value="'+this._options.action+'" />').appendTo(t),$('<input type="hidden" name="className" value="'+this._className+'" />').appendTo(t);var e=this._getParameters();for(var i in e)$('<input type="hidden" name="'+i+'" value="'+e[i]+'" />').appendTo(t);t.submit($.proxy(function(){var t={name:this._getFilename(),size:""},e=this._createUploadMatrix(t),i=this;this._iframe.data("loading",!0).off("load").load(function(){i._evaluateResponse(e)}),this._overlay.wcfDialog("close")},this))}this._overlay.wcfDialog({title:WCF.Language.get("wcf.global.button.upload")})},_evaluateResponse:function(t){var e=$.parseJSON(this._iframe.contents().find("pre").html());this._success(t,e)}}),WCF.Sortable={},WCF.Sortable.List=Class.extend({_additionalParameters:{},_className:"",_containerID:"",_container:null,_notification:null,_offset:0,_options:{},_proxy:null,_structure:{},init:function(t,e,i,n,a,s){if(this._additionalParameters=s||{},this._containerID=$.wcfEscapeID(t),this._container=$("#"+this._containerID),this._className=e,this._offset=i?i:0,this._proxy=new WCF.Action.Proxy({success:$.proxy(this._success,this)}),this._structure={},this._options=$.extend(!0,{axis:"y",connectWith:"#"+this._containerID+" .sortableList",disableNesting:"sortableNoNesting",doNotClear:!0,errorClass:"sortableInvalidTarget",forcePlaceholderSize:!0,helper:"clone",items:"li:not(.sortableNoSorting)",opacity:.6,placeholder:"sortablePlaceholder",tolerance:"pointer",toleranceElement:"> span"},n||{}),a?$("#"+this._containerID+" .sortableList").sortable(this._options):$("#"+this._containerID+" > .sortableList").nestedSortable(this._options),this._className){var o=this._container.find(".formSubmit");if(!o.length&&(o=this._container.next(".formSubmit"),!o.length))return console.debug("[WCF.Sortable.Simple] Unable to find form submit for saving, aborting."),void 0;o.children('button[data-type="submit"]').click($.proxy(this._submit,this))}},_submit:function(){this._structure={},this._container.find(".sortableList").each($.proxy(function(t,e){var i=$(e),n=i.data("objectID");void 0!==n&&i.children(this._options.items).each($.proxy(function(t,e){var i=$(e).data("objectID");this._structure[n]||(this._structure[n]=[]),this._structure[n].push(i)},this))},this));var t=$.extend(!0,{data:{offset:this._offset,structure:this._structure}},this._additionalParameters);this._proxy.setOption("data",{actionName:"updatePosition",className:this._className,interfaceName:"wcf\\data\\ISortableAction",parameters:t}),this._proxy.sendRequest()},_success:function(){null===this._notification&&(this._notification=new WCF.System.Notification(WCF.Language.get("wcf.global.success.edit"))),this._notification.show()}}),WCF.Popover=Class.extend({_activeElementID:"",_cancelPopover:!1,_data:{},_defaultDimensions:{height:150,width:450},_defaultOrientation:{x:"right",y:"top"},_delay:{show:800,hide:500},_hoverElement:!1,_hoverElementID:"",_hoverPopover:!1,_margin:20,_peOut:null,_peOverElement:null,_popover:null,_popoverContent:null,_popoverOffset:10,_selector:"",init:function(t){$.browser.mobile||(this._activeElementID="",this._cancelPopover=!1,this._data={},this._defaultDimensions={height:150,width:450},this._defaultOrientation={x:"right",y:"top"},this._delay={show:800,hide:500},this._hoverElement=!1,this._hoverElementID="",this._hoverPopover=!1,this._margin=20,this._peOut=null,this._peOverElement=null,this._popoverOffset=10,this._selector=t,this._popover=$('<div class="popover"><span class="icon icon48 icon-spinner"></span><div class="popoverContent"></div></div>').hide().appendTo(document.body),this._popoverContent=this._popover.children(".popoverContent:eq(0)"),this._popover.hover($.proxy(this._overPopover,this),$.proxy(this._out,this)),this._initContainers(),WCF.DOMNodeInsertedHandler.addCallback("WCF.Popover."+t,$.proxy(this._initContainers,this)))},_initContainers:function(){if(!$.browser.mobile){var t=$(this._selector);t.length&&t.each($.proxy(function(t,e){var i=$(e),n=i.wcfIdentify();this._data[n]||(this._data[n]={content:null,isLoading:!1},i.hover($.proxy(this._overElement,this),$.proxy(this._out,this)),i.is("a")&&i.attr("href")&&i.click($.proxy(this._cancel,this)))},this))}},_cancel:function(){this._cancelPopover=!0,this._hide(!0)},_overElement:function(t){if(!this._cancelPopover){null!==this._peOverElement&&this._peOverElement.stop();var e=$(t.currentTarget).wcfIdentify();this._hoverElementID=e,this._peOverElement=new WCF.PeriodicalExecuter($.proxy(function(t){t.stop(),this._hoverElementID===e&&(this._activeElementID=e,this._prepare())},this),this._delay.show),this._hoverElement=!0,this._hoverPopover=!1}},_prepare:function(){if(!this._cancelPopover){null!==this._peOut&&this._peOut.stop(),this._popover.is(":visible")&&this._hide(!0),!this._data[this._activeElementID].loading&&this._data[this._activeElementID].content?(this._popoverContent.html(this._data[this._activeElementID].content),WCF.DOMNodeInsertedHandler.execute()):this._data[this._activeElementID].loading=!0;var t=this._popover.show().getDimensions();t=this._data[this._activeElementID].loading?{height:Math.max(t.height,this._defaultDimensions.height),width:Math.max(t.width,this._defaultDimensions.width)}:this._fixElementDimensions(this._popover,t),this._popover.hide();var e=this._getOrientation(t.height,t.width);this._popover.css(this._getCSS(e.x,e.y)),this._popover.removeClass("bottom left right top").addClass(e.x).addClass(e.y),this._show()}},_show:function(){this._cancelPopover||(this._popover.stop().show().css({opacity:1}).wcfFadeIn(),this._data[this._activeElementID].loading?(this._popover.children("span").show(),this._loadContent()):(this._popover.children("span").hide(),this._popoverContent.css({opacity:1})))},_loadContent:function(){},_insertContent:function(t,e,i){if(this._data[t]={content:e,loading:!1},this._activeElementID===t)if(i){var n=this._popoverContent.getDimensions();this._popoverContent.css({height:"auto",width:"auto"}),this._popoverContent.html(this._data[t].content);var a=this._popoverContent.getDimensions();this._popoverContent.html("").css({height:n.height+"px",width:n.width+"px"});var s=this;this._popoverContent.animate({height:a.height+"px",width:a.width+"px"},300,function(){s._popover.children("span").hide(),s._popoverContent.html(s._data[t].content).css({opacity:0}).animate({opacity:1},200),WCF.DOMNodeInsertedHandler.execute()})}else this._popover.children("span").hide(),this._popoverContent.html(this._data[t].content),WCF.DOMNodeInsertedHandler.execute()},_hide:function(t){var e=this;this._popoverContent.stop(),this._popover.stop(),t?(e._popover.css({opacity:0}).hide(),e._popoverContent.empty().css({height:"auto",opacity:0,width:"auto"})):this._popover.wcfFadeOut(function(){e._popoverContent.empty().css({height:"auto",opacity:0,width:"auto"}),e._popover.hide()})},_overPopover:function(){null!==this._peOut&&this._peOut.stop(),this._hoverElement=!1,this._hoverPopover=!0},_out:function(){this._cancelPopover||(this._hoverElementID="",this._hoverElement=!1,this._hoverPopover=!1,this._peOut=new WCF.PeriodicalExecuter($.proxy(function(t){t.stop(),this._hoverElement||this._hoverPopover||this._hide(!1)},this),this._delay.hide))},_getOrientation:function(t,e){var i=$("#"+this._activeElementID),n=i.getOffsets("offset"),a=i.getDimensions(),s=$(document).getDimensions(),o="left"===this._defaultOrientation.x?"left":"right",r="bottom"===this._defaultOrientation.y?"bottom":"top",l=this._evaluateOrientation(o,r,n,a,s,t,e);return l.flawed&&(o="left"===o?"right":"left",l=this._evaluateOrientation(o,r,n,a,s,t,e),l.flawed&&(o="right"===o?"left":"right",r="bottom"===r?"top":"bottom",l=this._evaluateOrientation(o,r,n,a,s,t,e),l.flawed&&(o="left"===o?"right":"left",l=this._evaluateOrientation(o,r,n,a,s,t,e),l.flawed&&(o="left"===this._defaultOrientationX?"left":"right",r="bottom"===this._defaultOrientationY?"bottom":"top")))),{x:o,y:r}},_evaluateOrientation:function(t,e,i,n,a,s,o){var r=0,l=0;switch(t){case"left":l=i.left-o;break;case"right":l=a.width-(i.left+o)}switch(e){case"bottom":r=a.height-(i.top+n.height+this._popoverOffset+s);break;case"top":r=i.top-(s-this._popoverOffset)}var c=!1;return(r<this._margin||l<this._margin)&&(c=!0),{flawed:c,x:l,y:r}},_getCSS:function(t,e){var i={bottom:"auto",left:"auto",right:"auto",top:"auto"},n=$("#"+this._activeElementID),a=n.getOffsets("offset"),s=this._fixElementDimensions(n,n.getDimensions()),o=$(window).getDimensions();switch(t){case"left":i.right=o.width-(a.left+s.width);break;case"right":i.left=a.left}switch(e){case"bottom":i.top=a.top+(s.height+this._popoverOffset);break;case"top":i.bottom=o.height-(a.top-this._popoverOffset)}return i},_fixElementDimensions:function(t,e){var i=t.parent().getDimensions();return i.height<e.height&&(e.height=i.height),i.width<e.width&&(e.width=i.width),e}}),WCF.EditableItemList=Class.extend({_allowCustomInput:!1,_className:"",_data:{},_form:null,_itemList:null,_objectID:0,_objectTypeID:0,_search:null,_searchInput:null,init:function(t,e){if(this._itemList=$(t),this._searchInput=$(e),this._data={},!this._itemList.length||!this._searchInput.length)return console.debug("[WCF.EditableItemList] Item list and/or search input do not exist, aborting."),void 0;if(this._objectID=this._getObjectID(),this._objectTypeID=this._getObjectTypeID(),this._itemList.find(".jsEditableItem").click($.proxy(this._click,this)),this._itemList.children("ul").length||$("<ul />").appendTo(this._itemList),this._itemList=this._itemList.children("ul"),this._form=this._itemList.parents("form").submit($.proxy(this._submit,this)),this._allowCustomInput){var i=this;this._searchInput.keydown($.proxy(this._keyDown,this)).on("paste",function(){setTimeout(function(){i._onPaste()},100)})}this._searchInput.parents(".dropdown").data("preventSubmit",!0)},_keyDown:function(t){if(null===t||188===t.which||t.which===$.ui.keyCode.ENTER){if(null!==t&&t.which===$.ui.keyCode.ENTER&&this._search&&-1!==this._search._itemIndex)return!1;var e=$.trim(this._searchInput.val());return t&&188===t.which&&(e=e.substring(0,this._searchInput.getCaret())),""===e?!0:(this.addItem({objectID:0,label:e}),t&&188===t.which?this._searchInput.val($.trim(this._searchInput.val().substr(this._searchInput.getCaret()))):this._searchInput.val(""),null!==t&&t.stopPropagation(),!1)}return!0},_onPaste:function(){var t=$.trim(this._searchInput.val());t=t.split(",");for(var e=0,i=t.length;i>e;e++){var n=$.trim(t[e]);""!==n&&this.addItem({objectID:0,label:n})}this._searchInput.val("")},load:function(){},_click:function(t){var e=$(t.currentTarget),i=e.data("objectID"),n=e.data("label");return this._search&&this._search.removeExcludedSearchValue(n),this._removeItem(i,n),e.remove(),t.stopPropagation(),!1},_getObjectID:function(){return 0},_getObjectTypeID:function(){return 0},addItem:function(t){if(this._data[t.objectID]&&(0!==t.objectID||!this._allowCustomInput))return!0;var e=$('<li class="badge">'+WCF.String.escapeHTML(t.label)+"</li>").data("objectID",t.objectID).data("label",t.label).appendTo(this._itemList);return e.click($.proxy(this._click,this)),this._search&&this._search.addExcludedSearchValue(t.label),this._addItem(t.objectID,t.label),!0},clearList:function(){this._itemList.children("li").each($.proxy(function(t,e){var i=$(e);this._search&&this._search.removeExcludedSearchValue(i.data("label")),i.remove(),this._removeItem(i.data("objectID"),i.data("label"))},this))},_submit:function(){this._keyDown(null)},_addItem:function(t,e){this._data[t]=e},_removeItem:function(t){delete this._data[t]},getSearchInput:function(){return this._searchInput}}),WCF.Sitemap=Class.extend({_cache:[],_dialog:null,_didInit:!1,_proxy:null,init:function(){$("#sitemap").click($.proxy(this._click,this)),this._cache=[],this._dialog=null,this._didInit=!1,this._proxy=new WCF.Action.Proxy({success:$.proxy(this._success,this)})},_click:function(){null===this._dialog?(this._dialog=$('<div id="sitemapDialog" />').appendTo(document.body),this._proxy.setOption("data",{actionName:"getSitemap",className:"wcf\\data\\sitemap\\SitemapAction"}),this._proxy.sendRequest()):this._dialog.wcfDialog("open")},_success:function(t){this._didInit?(this._cache.push(t.returnValues.sitemapName),this._dialog.find("#sitemap_"+t.returnValues.sitemapName).html(t.returnValues.template),this._dialog.wcfDialog("render")):(this._cache.push(t.returnValues.sitemapName),this._dialog.html(t.returnValues.template),this._dialog.find(".sitemapNavigation").click($.proxy(this._navigate,this)),this._dialog.find(".tabMenuContainer").wcfTabs("select","sitemap_"+t.returnValues.sitemapName),this._dialog.wcfDialog({title:WCF.Language.get("wcf.page.sitemap")}),this._didInit=!0)},_navigate:function(t){var e=$(t.currentTarget).data("sitemapName");WCF.inArray(e,this._cache)?(this._dialog.find(".tabMenuContainer").wcfTabs("select","sitemap_"+e),this._dialog.wcfDialog("render")):(this._proxy.setOption("data",{actionName:"getSitemap",className:"wcf\\data\\sitemap\\SitemapAction",parameters:{sitemapName:e}}),this._proxy.sendRequest())}}),WCF.Language.Chooser=Class.extend({_callback:null,_dropdown:null,_input:null,init:function(t,e,i,n,a,s){var o=$("#"+t);if(1!=o.length)return console.debug("[WCF.Language.Chooser] Invalid container id '"+t+"' given"),void 0;if(this._input=$("#"+e),this._input.length||(this._input=$('<input type="hidden" name="'+e+'" value="'+i+'" />').appendTo(o)),void 0!==a){if(!$.isFunction(a))return console.debug("[WCF.Language.Chooser] Given callback is invalid"),void 0;this._callback=a}this._dropdown=$('<div class="dropdown" id="'+t+'-languageChooser" />').appendTo(o),$('<div class="dropdownToggle boxFlag box24" data-toggle="'+t+'-languageChooser"></div>').appendTo(this._dropdown);var r=$('<ul class="dropdownMenu" />').appendTo(this._dropdown);for(var l in n){var c=n[l],h=$('<li class="boxFlag"><a class="box24"><div class="framed"><img src="'+c.iconPath+'" alt="" class="iconFlag" /></div> <div><h3>'+c.languageName+"</h3></div></a></li>").appendTo(r);if(h.data("languageID",l).click($.proxy(this._click,this)),l==i){var d=$(""+h.html()),u=d.children().detach();this._dropdown.children(".dropdownToggle").empty().append(u)}}if(s){$('<li class="dropdownDivider" />').appendTo(r);var h=$("<li><a>"+WCF.Language.get("wcf.global.language.noSelection")+"</a></li>").data("languageID",0).click($.proxy(this._click,this)).appendTo(r);0===i&&this._dropdown.children(".dropdownToggle").empty().append(h.html())}WCF.Dropdown.init()},_click:function(t){var e=$(t.currentTarget),i=e.data("languageID");this._input.val(i);var n=$(""+e.html()),a=0===i?n:n.children().detach();this._dropdown.children(".dropdownToggle").empty().append(a),null!==this._callback&&this._callback(e)}}),WCF.Style={},WCF.Style.Chooser=Class.extend({_dialog:null,_proxy:null,init:function(){$('<li class="styleChooser"><a>'+WCF.Language.get("wcf.style.changeStyle")+"</a></li>").appendTo($("#footerNavigation > ul.navigationItems")).click($.proxy(this._showDialog,this)),this._proxy=new WCF.Action.Proxy({success:$.proxy(this._success,this)})},_showDialog:function(){null===this._dialog?(this._dialog=$('<div id="styleChooser" />').hide().appendTo(document.body),this._loadDialog()):this._dialog.wcfDialog({title:WCF.Language.get("wcf.style.changeStyle")})},_loadDialog:function(){this._proxy.setOption("data",{actionName:"getStyleChooser",className:"wcf\\data\\style\\StyleAction"}),this._proxy.sendRequest()},_success:function(t){return"changeStyle"===t.actionName?(window.location.reload(),void 0):(this._dialog.html(t.returnValues.template),this._dialog.find("li").addClass("pointer").click($.proxy(this._click,this)),this._showDialog(),void 0)},_click:function(t){this._proxy.setOption("data",{actionName:"changeStyle",className:"wcf\\data\\style\\StyleAction",objectIDs:[$(t.currentTarget).data("styleID")]}),this._proxy.sendRequest()}}),WCF.UserPanel=Class.extend({_container:null,_didLoad:!1,_link:null,_noItems:"",_revertOnEmpty:!0,init:function(t){return this._container=$("#"+t),this._didLoad=!1,this._revertOnEmpty=!0,1!=this._container.length?(console.debug("[WCF.UserPanel] Unable to find container identfied by '"+t+"', aborting."),void 0):(this._convert(),void 0)},_convert:function(){this._container.addClass("dropdown"),this._link=this._container.children("a").remove();var t=$('<a class="dropdownToggle">'+this._link.html()+"</a>").appendTo(this._container).click($.proxy(this._click,this)),e=$('<ul class="dropdownMenu" />').appendTo(this._container);$('<li class="jsDropdownPlaceholder"><span>'+WCF.Language.get("wcf.global.loading")+"</span></li>").appendTo(e),this._addDefaultItems(e),this._container.dblclick($.proxy(function(){return window.location=this._link.attr("href"),!1},this)),WCF.Dropdown.initDropdown(t,!1)},_addDefaultItems:function(){},_addDivider:function(t){$('<li class="dropdownDivider" />').appendTo(t)},_click:function(){this._didLoad||(new WCF.Action.Proxy({autoSend:!0,data:this._getParameters(),success:$.proxy(this._success,this)}),this._didLoad=!0)},_getParameters:function(){return{}},_success:function(t){var e=WCF.Dropdown.getDropdownMenu(this._container.wcfIdentify());if(e.children(".jsDropdownPlaceholder").remove(),t.returnValues&&t.returnValues.template){$(""+t.returnValues.template).prependTo(e);var i=this._container.find(".badge");i.length||(i=$('<span class="badge badgeInverse" />').appendTo(this._container.children(".dropdownToggle")),i.before(" ")),i.html(t.returnValues.totalCount),this._after(e)}else $("<li><span>"+WCF.Language.get(this._noItems)+"</span></li>").prependTo(e),this._container.find(".badge").remove()},_after:function(){}}),$.widget("ui.wcfDialog",{_closeButton:null,_container:null,_content:null,_overlay:null,_title:null,_titlebar:null,_isOpen:!1,options:{autoOpen:!0,closable:!0,closeButtonLabel:null,closeConfirmMessage:null,closeViaModal:!0,hideTitle:!1,modal:!0,title:"",zIndex:400,onClose:null,onShow:null},_createWidget:function(t,e){return"script"===$(e).getTagName()?(console.debug("[ui.wcfDialog] Ignored script tag"),this.element=!1,null):($.Widget.prototype._createWidget.apply(this,arguments),void 0)},_init:function(){this.options.autoOpen&&this.open(),$(window).resize($.proxy(this._resize,this))},_create:function(){null===this.options.closeButtonLabel&&(this.options.closeButtonLabel=WCF.Language.get("wcf.global.button.close")),this._container=$('<div class="dialogContainer" />').hide().css({zIndex:this.options.zIndex}).appendTo(document.body),this._titlebar=$('<header class="dialogTitlebar" />').hide().appendTo(this._container),this._title=$('<span class="dialogTitle" />').hide().appendTo(this._titlebar),this._closeButton=$('<a class="dialogCloseButton jsTooltip" title="'+this.options.closeButtonLabel+'"><span /></a>').click($.proxy(this.close,this)).hide().appendTo(this._titlebar),this._content=$('<div class="dialogContent" />').appendTo(this._container),this._setOption("title",this.options.title),this._setOption("closable",this.options.closable);var t=this.element.detach();this._content.html(t),this.options.modal&&(this._overlay=$("#jsWcfDialogOverlay"),this._overlay.length||(this._overlay=$('<div id="jsWcfDialogOverlay" class="dialogOverlay" />').css({height:"100%",zIndex:399}).hide().appendTo(document.body)),this.options.closable&&this.options.closeViaModal&&(this._overlay.click($.proxy(this.close,this)),$(document).keyup($.proxy(function(t){t.keyCode&&t.keyCode===$.ui.keyCode.ESCAPE&&(this.close(),t.preventDefault())},this)))),WCF.DOMNodeInsertedHandler.execute()},_setOption:function(t,e){return this.options[t]=e,"hideTitle"==t||"title"==t?this.options.hideTitle||""==this.options.title?this._title.html(""):this._title.html(this.options.title).show():("closable"==t||"closeButtonLabel"==t)&&(this.options.closable?(this._closeButton.attr("title",this.options.closeButtonLabel).show().find("span").html(this.options.closeButtonLabel),WCF.DOMNodeInsertedHandler.execute()):this._closeButton.hide()),!this.options.hideTitle&&""!=this.options.title||this.options.closable?this._titlebar.show():this._titlebar.hide(),this},open:function(){this.element!==!1&&(this.isOpen()||(null!==this._overlay&&(WCF.activeDialogs++,1===WCF.activeDialogs&&this._overlay.show()),this.render(),this._isOpen=!0))},isOpen:function(){return this._isOpen},close:function(t){this.isOpen()&&(this.options.closeConfirmMessage?WCF.System.Confirmation.show(this.options.closeConfirmMessage,$.proxy(function(t){"confirm"===t&&this._close()},this)):this._close(),void 0!==t&&t.preventDefault())},_close:function(){this._isOpen=!1,this._container.wcfFadeOut(),null!==this._overlay&&(WCF.activeDialogs--,0===WCF.activeDialogs&&this._overlay.hide()),null!==this.options.onClose&&this.options.onClose()},_resize:function(){this.isOpen()&&this.render()},render:function(){this._container.is(":visible")||"0px"!==this._container.css("top")||window.scrollTo(0,0),this._container.show(),this._content.children().show(),this._content.css({height:"auto",width:"auto"}),this._container.stop(),this._content.stop(),this._container.show().css("opacity",1);var t=0;this._content.find(".formSubmit").length?(t=this._content.find(".formSubmit").outerHeight(),this._content.addClass("dialogForm").css({marginBottom:t+"px"})):this._content.removeClass("dialogForm").css({marginBottom:"0px"});var e=$(window).getDimensions();.9*e.width>800&&this._container.css("maxWidth","800px");var i=this._container.getDimensions("outer"),n=this._content.getDimensions(),t=i.height-n.height,a=e.height-t-120;this._content.css({maxHeight:a+"px"}),this._determineOverflow(),i=this._container.getDimensions("outer");var s=Math.round((e.width-i.width)/2),o=Math.round((e.height-i.height)/2),r=Math.round(20*(e.height/100));o>r&&(o=r),this._container.css({left:s+"px",top:o+"px"}),this._content.css({height:"auto",width:"auto"}),this.isOpen()||(this._container.hide(),this._container.wcfFadeIn($.proxy(function(){null!==this.options.onShow&&this.options.onShow()},this)))},_determineOverflow:function(){var t=$(window).getDimensions(),e=this._content.css("maxHeight");this._content.css("maxHeight","none");var i=this._container.getDimensions("outer"),n="visible";if((.8*t.height<i.height||.8*t.width<i.width)&&(n="auto"),this._content.css("overflow",n),this._content.css("maxHeight",e),"visible"===n){var a=0;this._content.children().each(function(t,e){a+=$(e).outerHeight()}),this._content.height()<a&&this._content.css("overflow","auto")}},_getContentDimensions:function(t){var e=this._content.getDimensions();return t&&e.height>t&&(e.height=t),e}}),$.widget("ui.wcfSlideshow",{_buttonList:null,_count:0,_index:0,_itemList:null,_items:null,_timer:null,_width:0,options:{cycle:!0,cycleInterval:5,itemGap:50},_create:function(){this._itemList=this.element.children("ul"),this._items=this._itemList.children("li"),this._count=this._items.length,this._index=0,this._count>1&&this._initSlideshow()},_initSlideshow:function(){var t=$(this._items.get(0)).outerHeight();this._items.addClass("slideshowItem"),this._width=this.element.css("height",t).innerWidth(),this._itemList.addClass("slideshowItemList").css("left",0),this._items.each($.proxy(function(e,i){$(i).show().css({height:t,left:(this._width+this.options.itemGap)*e,width:this._width})},this)),this.element.css({height:t,width:this._width}).hover($.proxy(this._hoverIn,this),$.proxy(this._hoverOut,this)),this._buttonList=$('<ul class="slideshowButtonList" />').appendTo(this.element);for(var e=0;e<this._count;e++){var i=$('<li><a><span class="icon icon16 icon-circle" /></a></li>').data("index",e).click($.proxy(this._click,this)).appendTo(this._buttonList);0==e&&i.find(".icon").addClass("active")}this._resetTimer(),$(window).resize($.proxy(this._resize,this))},_resize:function(){this._width=this.element.css("width","auto").innerWidth(),this._items.each($.proxy(function(t,e){$(e).css({left:(this._width+this.options.itemGap)*t,width:this._width})},this)),this._index--,this.moveTo(null)},_hoverIn:function(){null!==this._timer&&this._timer.stop()},_hoverOut:function(){this._resetTimer()},_resetTimer:function(){if(this.options.cycle){null!==this._timer&&this._timer.stop();var t=this;this._timer=new WCF.PeriodicalExecuter(function(){t.moveTo(null)},1e3*this.options.cycleInterval)}},_click:function(t){this.moveTo($(t.currentTarget).data("index")),this._resetTimer()},moveTo:function(t){this._index=null===t?this._index+1:t,this._index==this._count&&(this._index=0),$(this._buttonList.find(".icon").removeClass("active").get(this._index)).addClass("active"),this._itemList.css("left",-1*this._index*(this._width+this.options.itemGap)),this._trigger("moveTo",null,{index:this._index})},getItem:function(t){return this._items[t]?this._items[t]:null}}),$.widget("ui.wcfTabs",$.ui.tabs,{_sanitizeSelector:function(t){return t.replace(/([:\.])/g,"\\$1")},select:function(t){return $.isNumeric(t)||(this.panels.each(function(e,i){return $(i).wcfIdentify()===t?(t=e,!1):void 0}),$.isNumeric(t))?(this._setOption("active",t),void 0):(console.debug("[ui.wcfTabs] Unable to find panel identified by '"+t+"', aborting."),void 0)},selectTab:function(t){t="#"+t,this.anchors.each(function(e,i){var n=$(i);return n.prop("hash")===t?(n.trigger("click"),!1):void 0})},getCurrentIndex:function(){return this.lis.index(this.lis.filter(".ui-tabs-selected"))},hasAnchor:function(t,e){var i=!1;return this.anchors.each(function(n,a){var s=$(a).attr("href");if(/#.+/.test(s)){var o=s.split("#",2);if(e&&(o=o[1].split("-",2)),o[1]===t)return i=!0,!1}}),i},revertToDefault:function(){var t=this.element.data("active");t&&""!==t||(t=0),this.select(t)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return $("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=$(),this.anchors.each(function(e,i){var n,a,s=$(i).uniqueId().attr("id"),o=$(i).closest("li"),r=o.attr("aria-controls");n=i.hash,a=t.element.find(t._sanitizeSelector(n)),a.length&&(t.panels=t.panels.add(a)),r&&o.data("ui-tabs-aria-controls",r),o.attr({"aria-controls":n.substring(1),"aria-labelledby":s}),a.attr("aria-labelledby",s)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},load:function(){}}),$.widget("ui.wcfPages",{SHOW_LINKS:11,SHOW_SUB_LINKS:20,options:{activePage:1,maxPage:1,nextPage:null,previousPage:null},_create:function(){null===this.options.nextPage&&(this.options.nextPage=WCF.Language.get("wcf.global.page.next")),null===this.options.previousPage&&(this.options.previousPage=WCF.Language.get("wcf.global.page.previous")),this.element.addClass("pageNavigation"),this._render()},destroy:function(){$.Widget.prototype.destroy.apply(this,arguments),this.element.children().remove()},_render:function(){if(!this.options.disabled&&this.options.maxPage>1){var t=!1;this.element.hasClass("hidden")&&this.element.removeClass("hidden"),this.element.show(),this.element.children().remove();var e=$("<ul />");this.element.append(e);var i=$('<li class="button skip" />');if(e.append(i),this.options.activePage>1){var n=$("<a"+(null!=this.options.previousPage?' title="'+this.options.previousPage+'"':"")+"></a>");i.append(n),this._bindSwitchPage(n,this.options.activePage-1);var a=$('<span class="icon icon16 icon-double-angle-left" />');n.append(a)}else{var a=$('<span class="icon icon16 icon-double-angle-left" />');i.append(a),i.addClass("disabled").removeClass("button"),a.addClass("disabled")}e.append(this._renderLink(1));var s=this.SHOW_LINKS-4,o=this.options.activePage-2;0>o&&(o=0);var r=this.options.maxPage-(this.options.activePage+1);0>r&&(r=0),this.options.activePage>1&&this.options.activePage<this.options.maxPage&&s--;var l=s/2,c=this.options.activePage,h=this.options.activePage;1>c&&(c=1),1>h&&(h=1),h>this.options.maxPage-1&&(h=this.options.maxPage-1),o>=l?c-=l:(c-=o,h+=l-o),r>=l?h+=l:(h+=r,c-=l-r),h=Math.ceil(h),c=Math.ceil(c),1>c&&(c=1),h>this.options.maxPage&&(h=this.options.maxPage),c>1&&(2>c-1?e.append(this._renderLink(2)):($('<li class="button jumpTo"><a title="'+WCF.Language.get("wcf.global.page.jumpTo")+'" class="jsTooltip">...</a></li>').appendTo(e),t=!0));for(var d=c+1;h>d;d++)e.append(this._renderLink(d));h<this.options.maxPage&&(this.options.maxPage-h<2?e.append(this._renderLink(this.options.maxPage-1)):($('<li class="button jumpTo"><a title="'+WCF.Language.get("wcf.global.page.jumpTo")+'" class="jsTooltip">...</a></li>').appendTo(e),t=!0)),e.append(this._renderLink(this.options.maxPage));var u=$('<li class="button skip" />');if(e.append(u),this.options.activePage<this.options.maxPage){var p=$("<a"+(null!=this.options.nextPage?' title="'+this.options.nextPage+'"':"")+"></a>");u.append(p),this._bindSwitchPage(p,this.options.activePage+1);var _=$('<span class="icon icon16 icon-double-angle-right" />');p.append(_)}else{var _=$('<span class="icon icon16 icon-double-angle-right" />');u.append(_),u.addClass("disabled").removeClass("button"),_.addClass("disabled")}t&&(e.data("pages",this.options.maxPage),WCF.System.PageNavigation.init("#"+e.wcfIdentify(),$.proxy(function(t){this.switchPage(t)},this)))}else this.element.hide()},_renderLink:function(t,e){var i=$('<li class="button"></li>');if(void 0!=e&&e&&i.addClass("break"),t!=this.options.activePage){var n=$("<a>"+WCF.String.addThousandsSeparator(t)+"</a>");i.append(n),this._bindSwitchPage(n,t)}else{i.addClass("active");var a=$("<span>"+WCF.String.addThousandsSeparator(t)+"</span>");i.append(a)}return i},_bindSwitchPage:function(t,e){var i=this;t.click(function(){i.switchPage(e)})},switchPage:function(t){this._setOption("activePage",t)},_setOption:function(t,e){if("activePage"==t){if(e!=this.options[t]&&e>0&&e<=this.options.maxPage){var i=this._trigger("shouldSwitch",void 0,{nextPage:e});i||void 0!==i?(this.options[t]=e,this._render(),this._trigger("switched",void 0,{activePage:e})):this._trigger("notSwitched",void 0,{activePage:e})
}}else this.options[t]=e,"disabled"==t?e?this.element.children().remove():this._render():"maxPage"==t&&this._render();return this},_startInput:function(t){var e=$(t.currentTarget);e.is("a")||(e=e.parent("a")),e.hide();var i=e.parent("li").children("input").css("display","block").val("");i.focus()},_stopInput:function(t){var e=$(t.currentTarget);e.css("display","none");var i=e.parent("li");void 0!=i&&null!=i&&i.children("a").show()},_handleInput:function(t){var e=$.browser.msie&&"7.0"==$.browser.version;("keyup"!=t.type||e)&&(e&&(13!=t.which&&27!=t.which||"keyup"!=t.type)||(13==t.which&&this.switchPage(parseInt($(t.currentTarget).val())),(13==t.which||27==t.which)&&(this._stopInput(t),t.stopPropagation())))}}),WCF.Category={},WCF.Category.NestedList=Class.extend({_categories:{},init:function(){var t=this;$(".jsCategory").each(function(e,i){var n=$(i).data("parentCategoryID",null).change($.proxy(t._updateSelection,t));t._categories[n.val()]=n;var a=[];n.parents("li").find(".jsChildCategory").each(function(e,i){var s=$(i).data("parentCategoryID",n.val()).change($.proxy(t._updateSelection,t));t._categories[s.val()]=s,a.push(s.val()),s.is(":checked")&&n.prop("checked","checked")}),n.data("childCategoryIDs",a)})},_updateSelection:function(t){var e=$(t.currentTarget),i=e.data("parentCategoryID");if(e.is(":checked"))null!==i&&this._categories[i].prop("checked","checked");else if(null===i)for(var n=e.data("childCategoryIDs"),a=0,s=n.length;s>a;a++)this._categories[n[a]].prop("checked",!1)}});